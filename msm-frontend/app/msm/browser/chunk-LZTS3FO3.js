import{a as Y}from"./chunk-O36OTMU2.js";import{$ as Mt,$a as Fe,A as u,Aa as _e,Ab as qe,B as d,Ba as ye,Bb as Ae,C as n,Ca as Ce,Cb as Re,D as r,Da as K,Db as Ne,E as p,Ea as T,Eb as P,F as y,Fa as O,G as C,Ga as q,Gb as Ze,H as k,Ha as A,Hb as Xe,I as f,Ia as xe,J as g,Ja as R,K as E,L as I,M as G,Ma as N,N as ge,Na as oe,Nb as se,O as m,Oa as ae,P as b,Pa as le,Q as M,Qa as L,Ra as Se,Rb as dt,Sb as ut,Ta as H,U as re,Ua as z,V as St,Va as B,W as Le,Wa as j,Xa as ee,Ya as be,Z as ne,Za as ve,_ as V,a as Z,aa as st,ab as mt,bb as Ye,cb as ke,d as ie,db as F,e as ce,eb as Dt,ec as tt,f as Tt,fb as ct,g as de,gc as Vt,h as ue,hb as et,ib as we,j as pe,jb as Ee,k as fe,kb as te,lb as $,n as at,p as D,pa as bt,q as lt,r as x,s as S,sb as Ie,tb as Ge,ub as Te,v as c,vb as Me,w as h,wb as De,xb as Ve,y as X,ya as Q,yb as Qe,za as he,zb as Oe}from"./chunk-J3ZMDLLJ.js";var At=["firstFocused"];function Rt(e,a){if(e&1&&p(0,"my-global-errors",18),e&2){let l=g();d("errors",l.errors)}}function Nt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}var rt=(()=>{let a=class a{constructor(t,i,o,s,_){this.fb=t,this.dialogRef=i,this.data=o,this.categoriesHttp=s,this.snackBar=_,this.errors=[],this.categoryFormGroup=this.fb.group({id:[void 0],label:["",[T.required]],notes:[""]})}ngOnInit(){this.data.mode=="edit"&&this.loadData(this.data.id)}loadData(t){this.categoriesHttp.getOneById(t).subscribe({next:i=>{this.categoryFormGroup.patchValue({id:i.id,label:i.label,notes:i.notes})}})}ngAfterViewInit(){setTimeout(()=>{this.firstFocused.nativeElement.focus()},300)}save(){this.errors=[],this.categoryFormGroup.valid==!0?this.data.mode=="creation"?this.categoriesHttp.create(this.getCreation()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.data={id:t.data.id,mode:"edit"},this.loadData(t.data.id)):this.errors=t.errors},error:t=>console.error(t)}):this.categoriesHttp.update(this.data.id,this.getUpdate()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.loadData(t.data.id)):this.errors=t.errors},error:t=>this.snackBar.open("L'op\xE9ration a \xE9chou\xE9","\u274C",{duration:7e3})}):this.categoryFormGroup.markAllAsTouched()}resetForm(){this.categoryFormGroup.reset({id:void 0,label:"",notes:""},{emitEvent:!1})}create(){this.resetForm(),this.firstFocused.nativeElement.focus(),this.categoryFormGroup.markAsUntouched(),this.categoryFormGroup.clearValidators(),this.categoryFormGroup.clearAsyncValidators(),this.data={id:0,mode:"creation"}}getCreation(){return Z({},this.categoryFormGroup.getRawValue())}getUpdate(){return Z({},this.categoryFormGroup.getRawValue())}closeDialog(){this.dialogRef.close()}};a.\u0275fac=function(i){return new(i||a)(h(L),h(we),h(Ee),h(Ze),h($))},a.\u0275cmp=D({type:a,selectors:[["app-category-form"]],viewQuery:function(i,o){if(i&1&&E(At,5),i&2){let s;I(s=G())&&(o.firstFocused=s.first)}},decls:25,vars:5,consts:[[1,"dialog-container"],[1,"dialog-header"],[1,"text-lg","font-medium"],[3,"click"],[1,"ri-close-line","text-2xl"],["class","px-3",3,"errors",4,"ngIf"],[1,"dialog-content"],[1,"flex","flex-col","gap-y-5","mt-3","h-64",3,"formGroup"],["formControlName","id","type","number",1,"!hidden"],[1,"w-80"],[3,"required"],["formControlName","label","type","text","myInput",""],["firstFocused",""],[4,"ngIf"],["formControlName","notes","myTextarea","","type","text"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"px-3",3,"errors"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3),r(),n(4,"button",3),f("click",function(){return o.closeDialog()}),p(5,"i",4),r()(),u(6,Rt,1,1,"my-global-errors",5),n(7,"div",6)(8,"form",7),p(9,"input",8),n(10,"my-form-field",9)(11,"my-label",10),m(12,"Libell\xE9"),r(),p(13,"input",11,12),u(15,Nt,2,0,"my-error",13),r(),n(16,"my-form-field",9)(17,"my-label"),m(18,"Notes"),r(),p(19,"textarea",14),r()()(),n(20,"div",15)(21,"button",16),f("click",function(){return o.create()}),m(22,"Nouvelle "),r(),n(23,"button",17),f("click",function(){return o.save()}),m(24,"Sauvegarder"),r()()()),i&2){let s;c(3),M(" ",o.data.mode=="creation"?"Nouvelle":"Modifier"," cat\xE9gorie "),c(3),d("ngIf",o.errors.length>0),c(2),d("formGroup",o.categoryFormGroup),c(3),d("required",!0),c(4),d("ngIf",((s=o.categoryFormGroup.get("label"))==null?null:s.invalid)&&(((s=o.categoryFormGroup.get("label"))==null?null:s.dirty)||((s=o.categoryFormGroup.get("label"))==null?null:s.touched))&&((s=o.categoryFormGroup.get("label"))==null?null:s.getError("required")))}},dependencies:[V,A,K,xe,O,q,R,N,Q,j,be,z,B,ee,ve],encapsulation:2});let e=a;return e})();var Lt=["firstFocused"];function Ht(e,a){if(e&1&&p(0,"my-global-errors",29),e&2){let l=g();d("errors",l.errors)}}function zt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Bt(e,a){if(e&1&&(y(0),n(1,"option",30),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function jt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function $t(e,a){if(e&1&&(y(0),n(1,"option",30),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function Pt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Ut(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Wt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Jt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Kt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}var nt=(()=>{let a=class a{constructor(t,i,o,s,_,v,w,U){this.fb=t,this.dialogRef=i,this.data=o,this.snackBar=s,this.stocksHttp=_,this.categoriesHttp=v,this.familiesHttp=w,this.matDialog=U,this.errors=[],this.categories=ie([]),this.families=ie([]),this.stockFormGroup=this.fb.group({id:[void 0],code:[""],label:["",[T.required]],familyId:[void 0,[T.required]],categoryId:[void 0,[T.required]],salePrice:[0,[T.required]],quantity:[0,[T.required]],amount:[0,[T.required]],status:["",[T.required]],notes:[""]})}ngOnInit(){this.categories=this.categoriesHttp.getAll(),this.families=this.familiesHttp.getAll(),this.data.mode=="edit"&&this.loadData(this.data.id),this.handleFormChanged()}loadData(t){this.stocksHttp.getOneById(t).subscribe({next:i=>{this.stockFormGroup.patchValue({id:i.id,code:i.code,label:i.label,familyId:i.familyId.id,categoryId:i.categoryId.id,salePrice:i.salePrice,quantity:i.quantity,amount:i.amount,status:i.status,notes:i.notes})}})}ngAfterViewInit(){setTimeout(()=>{this.firstFocused.nativeElement.focus()},300)}save(){this.errors=[],this.stockFormGroup.valid==!0?this.data.mode=="creation"?this.stocksHttp.create(this.getCreation()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.data={id:t.data.id,mode:"edit"},this.loadData(t.data.id)):this.errors=t.errors},error:t=>console.error(t)}):this.stocksHttp.update(this.data.id,this.getUpdate()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.loadData(t.data.id)):this.errors=t.errors},error:t=>this.snackBar.open("L'op\xE9ration a \xE9chou\xE9","\u274C",{duration:7e3})}):this.stockFormGroup.markAllAsTouched()}resetForm(){this.stockFormGroup.reset({id:void 0,code:"",label:"",familyId:void 0,categoryId:void 0,salePrice:0,quantity:0,amount:0,status:"",notes:""},{emitEvent:!1})}create(){this.resetForm(),this.firstFocused.nativeElement.focus(),this.stockFormGroup.markAsUntouched(),this.stockFormGroup.clearValidators(),this.stockFormGroup.clearAsyncValidators(),this.data={id:0,mode:"creation"}}getCreation(){return Z({},this.stockFormGroup.getRawValue())}getUpdate(){return Z({},this.stockFormGroup.getRawValue())}closeDialog(){this.dialogRef.close()}newFamily(){this.matDialog.open(ot,{data:{id:0,mode:"creation"},disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:t=>this.families=this.familiesHttp.getAll()})}newCategory(){this.matDialog.open(rt,{data:{id:0,mode:"creation"},disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:t=>this.families=this.categoriesHttp.getAll()})}handleFormChanged(){this.stockFormGroup.valueChanges.subscribe({next:t=>{this.stockFormGroup.get("amount")?.setValue(Dt(t.quantity,t.salePrice),{emitEvent:!1})}})}};a.\u0275fac=function(i){return new(i||a)(h(L),h(we),h(Ee),h($),h(se),h(Ze),h(Xe),h(te))},a.\u0275cmp=D({type:a,selectors:[["app-stock-form"]],viewQuery:function(i,o){if(i&1&&E(Lt,5),i&2){let s;I(s=G())&&(o.firstFocused=s.first)}},decls:74,vars:23,consts:[[1,"dialog-container"],[1,"dialog-header"],[1,"text-lg","font-medium"],[3,"click"],[1,"ri-close-line","text-2xl"],["class","px-3",3,"errors",4,"ngIf"],[1,"dialog-content"],[1,"flex","flex-col","gap-y-5","mt-3",3,"formGroup"],["formControlName","id","type","number",1,"!hidden"],[1,"inline-fields"],["formControlName","code","type","text","myInput",""],["firstFocused",""],[3,"required"],["formControlName","label","type","text","myInput",""],[4,"ngIf"],["formControlName","familyId","myInput",""],[4,"ngFor","ngForOf"],[1,"absolute","right-1","top-1","text-sm","text-primary",3,"click"],["formControlName","categoryId","myInput",""],["formControlName","status","myInput",""],["value","free"],["value","frozen"],["formControlName","salePrice","type","number","myInput",""],["formControlName","quantity","type","number","myInput",""],["formControlName","amount","type","number","myInput","","myCalculableField",""],["formControlName","notes","myTextarea","","type","text"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"px-3",3,"errors"],[3,"value"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3),r(),n(4,"button",3),f("click",function(){return o.closeDialog()}),p(5,"i",4),r()(),u(6,Ht,1,1,"my-global-errors",5),n(7,"div",6)(8,"form",7),p(9,"input",8),n(10,"div",9)(11,"my-form-field")(12,"my-label"),m(13,"Code"),r(),p(14,"input",10,11),r(),n(16,"my-form-field")(17,"my-label",12),m(18,"Libell\xE9"),r(),p(19,"input",13),u(20,zt,2,0,"my-error",14),r()(),n(21,"div",9)(22,"my-form-field")(23,"my-label",12),m(24,"Famille"),r(),n(25,"select",15),u(26,Bt,3,2,"ng-container",16),re(27,"async"),r(),u(28,jt,2,0,"my-error",14),n(29,"button",17),f("click",function(){return o.newFamily()}),m(30,"Nouveau"),r()(),n(31,"my-form-field")(32,"my-label",12),m(33,"Cat\xE9gorie"),r(),n(34,"select",18),u(35,$t,3,2,"ng-container",16),re(36,"async"),r(),u(37,Pt,2,0,"my-error",14),n(38,"button",17),f("click",function(){return o.newCategory()}),m(39,"Nouveau"),r()(),n(40,"my-form-field")(41,"my-label",12),m(42,"\xC9tat"),r(),n(43,"select",19)(44,"option",20),m(45,"Frais"),r(),n(46,"option",21),m(47,"Congel\xE9e"),r()(),u(48,Ut,2,0,"my-error",14),r()(),n(49,"div",9)(50,"my-form-field")(51,"my-label",12),m(52,"Prix de vente"),r(),p(53,"input",22),u(54,Wt,2,0,"my-error",14),r(),n(55,"my-form-field")(56,"my-label",12),m(57,"Quantit\xE9"),r(),p(58,"input",23),u(59,Jt,2,0,"my-error",14),r(),n(60,"my-form-field")(61,"my-label",12),m(62,"Montant"),r(),p(63,"input",24),u(64,Kt,2,0,"my-error",14),r()(),n(65,"my-form-field")(66,"my-label"),m(67,"Notes"),r(),p(68,"textarea",25),r()()(),n(69,"div",26)(70,"button",27),f("click",function(){return o.create()}),m(71,"Nouveau "),r(),n(72,"button",28),f("click",function(){return o.save()}),m(73,"Sauvegarder"),r()()()),i&2){let s,_,v,w,U,W,J;c(3),M(" ",o.data.mode=="creation"?"Nouveau":"Modifier"," stock "),c(3),d("ngIf",o.errors.length>0),c(2),d("formGroup",o.stockFormGroup),c(9),d("required",!0),c(3),d("ngIf",((s=o.stockFormGroup.get("label"))==null?null:s.invalid)&&(((s=o.stockFormGroup.get("label"))==null?null:s.dirty)||((s=o.stockFormGroup.get("label"))==null?null:s.touched))&&((s=o.stockFormGroup.get("label"))==null?null:s.getError("required"))),c(3),d("required",!0),c(3),d("ngForOf",St(27,19,o.families)),c(2),d("ngIf",((_=o.stockFormGroup.get("familyId"))==null?null:_.invalid)&&(((_=o.stockFormGroup.get("familyId"))==null?null:_.dirty)||((_=o.stockFormGroup.get("familyId"))==null?null:_.touched))&&((_=o.stockFormGroup.get("familyId"))==null?null:_.getError("required"))),c(4),d("required",!0),c(3),d("ngForOf",St(36,21,o.categories)),c(2),d("ngIf",((v=o.stockFormGroup.get("categoryId"))==null?null:v.invalid)&&(((v=o.stockFormGroup.get("categoryId"))==null?null:v.dirty)||((v=o.stockFormGroup.get("categoryId"))==null?null:v.touched))&&((v=o.stockFormGroup.get("categoryId"))==null?null:v.getError("required"))),c(4),d("required",!0),c(7),d("ngIf",((w=o.stockFormGroup.get("status"))==null?null:w.invalid)&&(((w=o.stockFormGroup.get("status"))==null?null:w.dirty)||((w=o.stockFormGroup.get("status"))==null?null:w.touched))&&((w=o.stockFormGroup.get("status"))==null?null:w.getError("required"))),c(3),d("required",!0),c(3),d("ngIf",((U=o.stockFormGroup.get("salePrice"))==null?null:U.invalid)&&(((U=o.stockFormGroup.get("salePrice"))==null?null:U.dirty)||((U=o.stockFormGroup.get("salePrice"))==null?null:U.touched))&&((U=o.stockFormGroup.get("salePrice"))==null?null:U.getError("required"))),c(2),d("required",!0),c(3),d("ngIf",((W=o.stockFormGroup.get("quantity"))==null?null:W.invalid)&&(((W=o.stockFormGroup.get("quantity"))==null?null:W.dirty)||((W=o.stockFormGroup.get("quantity"))==null?null:W.touched))&&((W=o.stockFormGroup.get("quantity"))==null?null:W.getError("required"))),c(2),d("required",!0),c(3),d("ngIf",((J=o.stockFormGroup.get("amount"))==null?null:J.invalid)&&(((J=o.stockFormGroup.get("amount"))==null?null:J.dirty)||((J=o.stockFormGroup.get("amount"))==null?null:J.touched))&&((J=o.stockFormGroup.get("amount"))==null?null:J.getError("required")))}},dependencies:[ne,V,A,ae,le,K,xe,oe,O,q,R,N,Q,j,be,z,B,ee,ve,tt,Mt],styles:[`app-stock-form{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var Zt=["firstFocused"];function Xt(e,a){if(e&1&&p(0,"my-global-errors",18),e&2){let l=g();d("errors",l.errors)}}function Yt(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}var ot=(()=>{let a=class a{callStock(){this.matDialog.open(nt,{data:{id:0,mode:"creation"}})}constructor(t,i,o,s,_,v){this.fb=t,this.dialogRef=i,this.data=o,this.familiesHttp=s,this.snackBar=_,this.matDialog=v,this.errors=[],this.familyFormGroup=this.fb.group({id:[void 0],label:["",[T.required]],notes:[""]})}ngOnInit(){this.data.mode=="edit"&&this.loadData(this.data.id)}loadData(t){this.familiesHttp.getOneById(t).subscribe({next:i=>{this.familyFormGroup.patchValue({id:i.id,label:i.label,notes:i.notes})}})}ngAfterViewInit(){setTimeout(()=>{this.firstFocused.nativeElement.focus()},300)}save(){this.errors=[],this.familyFormGroup.valid==!0?this.data.mode=="creation"?this.familiesHttp.create(this.getCreation()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.data={id:t.data.id,mode:"edit"},this.loadData(t.data.id)):this.errors=t.errors},error:t=>console.error(t)}):this.familiesHttp.update(this.data.id,this.getUpdate()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.loadData(t.data.id)):this.errors=t.errors},error:t=>this.snackBar.open("L'op\xE9ration a \xE9chou\xE9","\u274C",{duration:7e3})}):this.familyFormGroup.markAllAsTouched()}resetForm(){this.familyFormGroup.reset({id:void 0,label:"",notes:""},{emitEvent:!1})}create(){this.resetForm(),this.firstFocused.nativeElement.focus(),this.familyFormGroup.markAsUntouched(),this.familyFormGroup.clearValidators(),this.familyFormGroup.clearAsyncValidators(),this.data={id:0,mode:"creation"}}getCreation(){return Z({},this.familyFormGroup.getRawValue())}getUpdate(){return Z({},this.familyFormGroup.getRawValue())}closeDialog(){this.dialogRef.close()}};a.\u0275fac=function(i){return new(i||a)(h(L),h(we),h(Ee),h(Xe),h($),h(te))},a.\u0275cmp=D({type:a,selectors:[["app-family-form"]],viewQuery:function(i,o){if(i&1&&E(Zt,5),i&2){let s;I(s=G())&&(o.firstFocused=s.first)}},decls:27,vars:5,consts:[[1,"dialog-container"],[1,"dialog-header"],[1,"text-lg","font-medium"],[3,"click"],[1,"ri-close-line","text-2xl"],["class","px-3",3,"errors",4,"ngIf"],[1,"dialog-content"],[1,"flex","flex-col","gap-y-5","mt-3","h-64",3,"formGroup"],["formControlName","id","type","number",1,"!hidden"],[1,"w-80"],[3,"required"],["formControlName","label","type","text","myInput",""],["firstFocused",""],[4,"ngIf"],["formControlName","notes","myTextarea","","type","text"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"px-3",3,"errors"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3),r(),n(4,"button",3),f("click",function(){return o.callStock()}),m(5,"Call Stock form"),r(),n(6,"button",3),f("click",function(){return o.closeDialog()}),p(7,"i",4),r()(),u(8,Xt,1,1,"my-global-errors",5),n(9,"div",6)(10,"form",7),p(11,"input",8),n(12,"my-form-field",9)(13,"my-label",10),m(14,"Libell\xE9"),r(),p(15,"input",11,12),u(17,Yt,2,0,"my-error",13),r(),n(18,"my-form-field",9)(19,"my-label"),m(20,"Notes"),r(),p(21,"textarea",14),r()()(),n(22,"div",15)(23,"button",16),f("click",function(){return o.create()}),m(24,"Nouvelle "),r(),n(25,"button",17),f("click",function(){return o.save()}),m(26,"Sauvegarder"),r()()()),i&2){let s;c(3),M(" ",o.data.mode=="creation"?"Nouvelle":"Modifier"," famille "),c(5),d("ngIf",o.errors.length>0),c(2),d("formGroup",o.familyFormGroup),c(3),d("required",!0),c(4),d("ngIf",((s=o.familyFormGroup.get("label"))==null?null:s.invalid)&&(((s=o.familyFormGroup.get("label"))==null?null:s.dirty)||((s=o.familyFormGroup.get("label"))==null?null:s.touched))&&((s=o.familyFormGroup.get("label"))==null?null:s.getError("required")))}},dependencies:[V,A,K,xe,O,q,R,N,Q,j,be,z,B,ee,ve],encapsulation:2});let e=a;return e})();var ei=["firstFocused"];function ti(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function ii(e,a){if(e&1){let l=k();n(0,"div",29)(1,"div",30)(2,"span"),m(3,"Filtrer"),r(),n(4,"button",31),f("click",function(){x(l);let i=g();return S(i.toggleFilterMenu())}),p(5,"i",32),r()(),n(6,"form",33)(7,"my-form-field")(8,"my-label"),m(9,"Libell\xE9 *"),r(),p(10,"input",34,35),u(12,ti,2,0,"my-error",36),r()(),n(13,"div",37)(14,"button",38),f("click",function(){x(l);let i=g();return S(i.resetItemsFilterForm())}),m(15,"R\xE9initialiser"),r(),n(16,"button",11),f("click",function(){x(l);let i=g();return S(i.filterItems())}),m(17,"Appliquer"),r()()()}if(e&2){let l=g(),t;c(6),d("formGroup",l.familyFilterFormGroup),c(6),d("ngIf",((t=l.familyFilterFormGroup.get("label"))==null?null:t.invalid)&&(((t=l.familyFilterFormGroup.get("label"))==null?null:t.dirty)||((t=l.familyFilterFormGroup.get("label"))==null?null:t.touched))&&((t=l.familyFilterFormGroup.get("label"))==null?null:t.getError("required")))}}function ri(e,a){if(e&1){let l=k();n(0,"button",39),f("click",function(){x(l);let i=g();return S(i.deleteSeleted())}),n(1,"div",40),p(2,"i",41),n(3,"span"),m(4),r()()()}if(e&2){let l=g();c(4),M("Supprimer (",l.selection.selected.length,")")}}function ni(e,a){if(e&1){let l=k();n(0,"th",42)(1,"mat-checkbox",43),f("change",function(i){x(l);let o=g();return S(o.allSelectionChanged(i))}),r()()}if(e&2){let l=g();c(),d("checked",l.selection.hasValue()&&l.isAllSelected())("indeterminate",l.selection.hasValue()&&!l.isAllSelected())("aria-label",l.checkboxLabel())}}function oi(e,a){if(e&1){let l=k();n(0,"td",44)(1,"mat-checkbox",45),f("click",function(i){return i.stopPropagation()})("change",function(i){let s=x(l).$implicit,_=g();return S(_.selectionChanged(i,s))}),r()()}if(e&2){let l=a.$implicit,t=g();c(),d("checked",t.selection.isSelected(l))("aria-label",t.checkboxLabel(l))}}function ai(e,a){e&1&&(n(0,"th",42),m(1,"Code "),r())}function li(e,a){if(e&1&&(n(0,"td",44),m(1),r()),e&2){let l=a.$implicit;c(),b(l.code)}}function si(e,a){e&1&&(n(0,"th",42),m(1,"Libell\xE9 "),r())}function mi(e,a){if(e&1&&(n(0,"td",44),m(1),r()),e&2){let l=a.$implicit;c(),b(l.label)}}function ci(e,a){e&1&&(n(0,"th",42),m(1,"Notes"),r())}function di(e,a){if(e&1&&(n(0,"td",44),m(1),r()),e&2){let l=a.$implicit;c(),b(l.notes)}}function ui(e,a){e&1&&(n(0,"th",46),m(1,"Action"),r())}function pi(e,a){if(e&1){let l=k();n(0,"td",44)(1,"div",47)(2,"button",48),p(3,"i",49),r(),n(4,"button",50),f("click",function(){let o=x(l).$implicit,s=g();return S(s.deleteItem(o))}),p(5,"i",51),r(),n(6,"button",50),f("click",function(){let o=x(l).$implicit,s=g();return S(s.newItem("edit",o.id))}),p(7,"i",52),r()()()}if(e&2){let l=a.$implicit,t=g();c(2),d("matTooltip",t.getTracabilityInfo(l))}}function fi(e,a){e&1&&p(0,"tr",53)}function gi(e,a){if(e&1){let l=k();n(0,"tr",54),f("dblclick",function(){let o=x(l).$implicit,s=g();return S(s.newItem("edit",o.id))}),r()}}function hi(e,a){e&1&&(n(0,"div",55)(1,"p",56),m(2,"Aucune donn\xE9e \xE0 afficher"),r()())}var vt=(()=>{let a=class a{isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.data.length;return t===i}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:`${this.isAllSelected()?"deselect":"select"} all`}constructor(t,i,o,s,_){this.familiesHttp=t,this.snackBar=i,this.fb=o,this.matDialog=s,this.traceability=_,this.dataSource=new Ne([]),this.displayedColumns=["select","code","label","notes","actions"],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.isFilterMenuOpen=!1,this.refreshGrid=new X,this.familyFilterChanged=new X,this.pageSize=Y.pagination.pageSize,this.families=[],this.selection=new _e(!0,[]),this.showFirstLastButtons=Y.pagination.showFirstLastButtons,this.familyFilterFormGroup=this.fb.group({label:[""]})}ngOnInit(){}ngAfterViewInit(){this.sort.sortChange.subscribe({next:()=>this.paginator.pageIndex=0}),de(this.sort.sortChange,this.paginator.page,this.refreshGrid,this.familyFilterChanged).pipe(pe({}),fe(()=>(this.isLoadingResults=!0,this.familiesHttp.paginate(this.getFilterQuery).pipe(ue(()=>ie(null))))),ce(t=>(this.isLoadingResults=!1,this.isRateLimitReached=t?.data===null,ke(t)?[]:(this.resultsLength=t?.count,t?.items)))).subscribe({next:t=>this.dataSource.data=t})}newItem(t="creation",i=0){this.matDialog.open(ot,{data:{id:i,mode:t},disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:o=>this.refreshGrid.emit()})}deleteItem(t){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany([t])}deleteSeleted(){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany(this.selection.selected)}filterItems(){this.familyFilterChanged.emit()}resetItemsFilterForm(){this.familyFilterFormGroup.reset({label:""}),this.familyFilterChanged.emit()}toggleFilterMenu(){this.isFilterMenuOpen=!this.isFilterMenuOpen,this.isFilterMenuOpen&&setTimeout(()=>{this.firstFocused?.nativeElement.focus()},200)}allSelectionChanged(t){t&&this.toggleAllRows()}selectionChanged(t,i){t&&this.selection.toggle(i)}deleteMany(t){let i=new URLSearchParams;t.forEach(s=>{i.append("id",s.id.toString())});let o=`?${i.toString()}`;this.familiesHttp.deleteMany(o).subscribe({next:s=>{s.success&&(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.refreshGrid.emit(),this.selection.clear())},error:s=>this.snackBar.open(s.message)})}get getFilterQuery(){let t=new URLSearchParams,i={pageIndex:this.paginator.pageIndex,pageSize:this.pageSize,label:this.familyFilterFormGroup.get("label")?.value};return F(i.pageIndex)&&t.append("pageIndex",i.pageIndex.toString()),F(i.pageSize)&&t.append("pageSize",i.pageSize.toString()),t.append("order","DESC"),F(i.label)&&t.append("label",i.label),`?${t.toString()}`}getTracabilityInfo(t){return this.traceability.info(t)}};a.\u0275fac=function(i){return new(i||a)(h(Xe),h($),h(L),h(te),h(Fe))},a.\u0275cmp=D({type:a,selectors:[["app-families-grid"]],viewQuery:function(i,o){if(i&1&&(E(H,5),E(P,5),E(ei,5)),i&2){let s;I(s=G())&&(o.paginator=s.first),I(s=G())&&(o.sort=s.first),I(s=G())&&(o.firstFocused=s.first)}},decls:42,vars:12,consts:[[1,"flex","flex-1","flex-col","p-3","bg-secondary-50","gap-y-2"],[1,"flex","flex-col"],[1,"flex","flex-row","justify-between","items-center"],[1,"relative"],["mat-button","","cdkOverlayOrigin","",3,"click"],["trigger","cdkOverlayOrigin"],[1,"space-x-2"],[1,"ri-equalizer-line","text-lg"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","backdropClick"],[1,"flex","flex-row","items-center","gap-x-3"],["mat-stroked-button","","color","warn","class","!border-red-700 !border",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"!flex","!flex-row","!items-center","!space-x-2"],[1,"ri-add-line","text-lg"],[1,"text-white"],[1,"relative","flex-1","overflow-auto","!h-[calc(100vh-185px)]","bg-white","rounded","shadow"],["mat-table","","matSort","","matSortActive","createdAt","matSortDisableClear","","matSortDirection","desc",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","label"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-cell","","class","!text-center w-20 ",4,"matHeaderCellDef"],["mat-header-row","","class","!bg-gray-50",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:!bg-slate-50 cursor-pointer",3,"dblclick",4,"matRowDef","matRowDefColumns"],["class","flex flex-row items-center space-x-1 p-4",4,"ngIf"],["aria-label","S\xE9lectionnez la page des r\xE9sultats de recherche d'apc kouba",1,"!flex","!justify-start","!bg-transparent",3,"showFirstLastButtons","length","pageSize"],[1,"flex","flex-col","min-w-[400px]","max-h-[80vh]","overflow-auto","bg-white","shadow-lg","border","border-gray-200","rounded-sm"],[1,"flex","flex-row","items-center","justify-between","px-4","py-2","bg-slate-100"],[3,"click"],[1,"ri-close-line"],[1,"flex","flex-col","!text-sm","gap-y-2","p-5",3,"formGroup"],["formControlName","label","type","text","myInput",""],["firstFocused",""],[4,"ngIf"],[1,"flex","flex-row","justify-between","p-6"],["mat-stroked-button","","color","secondary",3,"click"],["mat-stroked-button","","color","warn",1,"!border-red-700","!border",3,"click"],[1,"flex","flex-row","items-center","gap-x-2"],[1,"ri-delete-bin-6-line","text-lg"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","",1,"!text-center","w-20"],[1,"flex","flex-row","items-center","space-x-2"],["mat-icon-button","",3,"matTooltip"],[1,"ri-information-line"],["mat-icon-button","",3,"click"],[1,"ri-delete-bin-6-line","text-red-600"],[1,"ri-pencil-line"],["mat-header-row","",1,"!bg-gray-50"],["mat-row","",1,"hover:!bg-slate-50","cursor-pointer",3,"dblclick"],[1,"flex","flex-row","items-center","space-x-1","p-4"],[1,"text-sm","font-light","text-black"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),m(3,"Stock / Familles"),r()(),n(4,"div",2)(5,"div",3)(6,"button",4,5),f("click",function(){return o.toggleFilterMenu()}),n(8,"div",6),p(9,"i",7),n(10,"span"),m(11,"FILTRE"),r()()(),u(12,ii,18,2,"ng-template",8),f("backdropClick",function(){return o.toggleFilterMenu()}),r(),n(13,"div",9),u(14,ri,5,1,"button",10),n(15,"button",11),f("click",function(){return o.newItem()}),n(16,"div",12),p(17,"i",13),n(18,"span",14),m(19,"Famille"),r()()()()(),n(20,"div")(21,"div",15)(22,"table",16),y(23,17),u(24,ni,2,3,"th",18)(25,oi,2,2,"td",19),C(),y(26,20),u(27,ai,2,0,"th",18)(28,li,2,1,"td",19),C(),y(29,21),u(30,si,2,0,"th",18)(31,mi,2,1,"td",19),C(),y(32,22),u(33,ci,2,0,"th",18)(34,di,2,1,"td",19),C(),y(35,23),u(36,ui,2,0,"th",24)(37,pi,8,1,"td",19),C(),u(38,fi,1,0,"tr",25)(39,gi,1,0,"tr",26),r(),u(40,hi,3,0,"div",27),r(),p(41,"mat-paginator",28),r()()),i&2){let s=ge(7);c(12),d("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",o.isFilterMenuOpen)("cdkConnectedOverlayHasBackdrop",!0),c(2),d("ngIf",o.selection.selected.length>0),c(8),d("dataSource",o.dataSource),c(16),d("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),c(),d("matRowDefColumns",o.displayedColumns),c(),d("ngIf",o.dataSource.data.length==0),c(),d("showFirstLastButtons",o.showFirstLastButtons)("length",o.resultsLength)("pageSize",o.pageSize)}},dependencies:[V,A,K,O,q,R,N,Se,Q,he,Ie,Ge,Me,Oe,De,Te,qe,Ve,Qe,Ae,Re,H,P,Ce,ye,j,z,B,ee],styles:[`app-families-grid{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var _i=["firstFocused"];function yi(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Ci(e,a){if(e&1){let l=k();n(0,"div",29)(1,"div",30)(2,"span"),m(3,"Filtrer"),r(),n(4,"button",31),f("click",function(){x(l);let i=g();return S(i.toggleFilterMenu())}),p(5,"i",32),r()(),n(6,"form",33)(7,"my-form-field")(8,"my-label"),m(9,"Libell\xE9"),r(),p(10,"input",34,35),u(12,yi,2,0,"my-error",36),r()(),n(13,"div",37)(14,"button",38),f("click",function(){x(l);let i=g();return S(i.resetItemsFilterForm())}),m(15,"R\xE9initialiser"),r(),n(16,"button",11),f("click",function(){x(l);let i=g();return S(i.filterItems())}),m(17,"Appliquer"),r()()()}if(e&2){let l=g(),t;c(6),d("formGroup",l.categoryFilterFormGroup),c(6),d("ngIf",((t=l.categoryFilterFormGroup.get("label"))==null?null:t.invalid)&&(((t=l.categoryFilterFormGroup.get("label"))==null?null:t.dirty)||((t=l.categoryFilterFormGroup.get("label"))==null?null:t.touched))&&((t=l.categoryFilterFormGroup.get("label"))==null?null:t.getError("required")))}}function xi(e,a){if(e&1){let l=k();n(0,"button",39),f("click",function(){x(l);let i=g();return S(i.deleteSeleted())}),n(1,"div",40),p(2,"i",41),n(3,"span"),m(4),r()()()}if(e&2){let l=g();c(4),M("Supprimer (",l.selection.selected.length,")")}}function Si(e,a){if(e&1){let l=k();n(0,"th",42)(1,"mat-checkbox",43),f("change",function(i){x(l);let o=g();return S(o.allSelectionChanged(i))}),r()()}if(e&2){let l=g();c(),d("checked",l.selection.hasValue()&&l.isAllSelected())("indeterminate",l.selection.hasValue()&&!l.isAllSelected())("aria-label",l.checkboxLabel())}}function bi(e,a){if(e&1){let l=k();n(0,"td",44)(1,"mat-checkbox",45),f("click",function(i){return i.stopPropagation()})("change",function(i){let s=x(l).$implicit,_=g();return S(_.selectionChanged(i,s))}),r()()}if(e&2){let l=a.$implicit,t=g();c(),d("checked",t.selection.isSelected(l))("aria-label",t.checkboxLabel(l))}}function vi(e,a){e&1&&(n(0,"th",42),m(1,"Code "),r())}function Fi(e,a){if(e&1&&(n(0,"td",44),m(1),r()),e&2){let l=a.$implicit;c(),b(l.code)}}function ki(e,a){e&1&&(n(0,"th",42),m(1,"Libell\xE9 "),r())}function wi(e,a){if(e&1&&(n(0,"td",44),m(1),r()),e&2){let l=a.$implicit;c(),b(l.label)}}function Ei(e,a){e&1&&(n(0,"th",42),m(1,"Notes"),r())}function Ii(e,a){if(e&1&&(n(0,"td",44),m(1),r()),e&2){let l=a.$implicit;c(),b(l.notes)}}function Gi(e,a){e&1&&(n(0,"th",46),m(1,"Action"),r())}function Ti(e,a){if(e&1){let l=k();n(0,"td",44)(1,"div",47)(2,"button",48),p(3,"i",49),r(),n(4,"button",50),f("click",function(){let o=x(l).$implicit,s=g();return S(s.deleteItem(o))}),p(5,"i",51),r(),n(6,"button",50),f("click",function(){let o=x(l).$implicit,s=g();return S(s.newItem("edit",o.id))}),p(7,"i",52),r()()()}if(e&2){let l=a.$implicit,t=g();c(2),d("matTooltip",t.getTracabilityInfo(l))}}function Mi(e,a){e&1&&p(0,"tr",53)}function Di(e,a){if(e&1){let l=k();n(0,"tr",54),f("dblclick",function(){let o=x(l).$implicit,s=g();return S(s.newItem("edit",o.id))}),r()}}function Vi(e,a){e&1&&(n(0,"div",55)(1,"p",56),m(2,"Aucune donn\xE9e \xE0 afficher"),r()())}var Ft=(()=>{let a=class a{isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.data.length;return t===i}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:`${this.isAllSelected()?"deselect":"select"} all`}constructor(t,i,o,s,_){this.categoriesHttp=t,this.snackBar=i,this.fb=o,this.matDialog=s,this.traceability=_,this.dataSource=new Ne([]),this.displayedColumns=["select","code","label","notes","actions"],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.isFilterMenuOpen=!1,this.refreshGrid=new X,this.categoryFilterChanged=new X,this.pageSize=Y.pagination.pageSize,this.categories=[],this.selection=new _e(!0,[]),this.showFirstLastButtons=Y.pagination.showFirstLastButtons,this.categoryFilterFormGroup=this.fb.group({label:[""]})}ngOnInit(){}ngAfterViewInit(){this.sort.sortChange.subscribe({next:()=>this.paginator.pageIndex=0}),de(this.sort.sortChange,this.paginator.page,this.refreshGrid,this.categoryFilterChanged).pipe(pe({}),fe(()=>(this.isLoadingResults=!0,this.categoriesHttp.paginate(this.getFilterQuery).pipe(ue(()=>ie(null))))),ce(t=>(this.isLoadingResults=!1,this.isRateLimitReached=t?.data===null,ke(t)?[]:(this.resultsLength=t?.count,t?.items)))).subscribe({next:t=>this.dataSource.data=t})}newItem(t="creation",i=0){this.matDialog.open(rt,{data:{id:i,mode:t},disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:o=>this.refreshGrid.emit()})}deleteItem(t){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany([t])}deleteSeleted(){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany(this.selection.selected)}filterItems(){this.categoryFilterChanged.emit()}resetItemsFilterForm(){this.categoryFilterFormGroup.reset({label:""}),this.categoryFilterChanged.emit()}toggleFilterMenu(){this.isFilterMenuOpen=!this.isFilterMenuOpen,this.isFilterMenuOpen&&setTimeout(()=>{this.firstFocused?.nativeElement.focus()},200)}allSelectionChanged(t){t&&this.toggleAllRows()}selectionChanged(t,i){t&&this.selection.toggle(i)}deleteMany(t){let i=new URLSearchParams;t.forEach(s=>{i.append("id",s.id.toString())});let o=`?${i.toString()}`;this.categoriesHttp.deleteMany(o).subscribe({next:s=>{s.success&&(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.refreshGrid.emit(),this.selection.clear())},error:s=>this.snackBar.open(s.message)})}get getFilterQuery(){let t=new URLSearchParams,i={pageIndex:this.paginator.pageIndex,pageSize:this.pageSize,label:this.categoryFilterFormGroup.get("label")?.value};return F(i.pageIndex)&&t.append("pageIndex",i.pageIndex.toString()),F(i.pageSize)&&t.append("pageSize",i.pageSize.toString()),t.append("order","DESC"),F(i.label)&&t.append("label",i.label),`?${t.toString()}`}getTracabilityInfo(t){return this.traceability.info(t)}};a.\u0275fac=function(i){return new(i||a)(h(Ze),h($),h(L),h(te),h(Fe))},a.\u0275cmp=D({type:a,selectors:[["app-categories-grid"]],viewQuery:function(i,o){if(i&1&&(E(H,5),E(P,5),E(_i,5)),i&2){let s;I(s=G())&&(o.paginator=s.first),I(s=G())&&(o.sort=s.first),I(s=G())&&(o.firstFocused=s.first)}},decls:42,vars:12,consts:[[1,"flex","flex-1","flex-col","p-3","bg-secondary-50","gap-y-2"],[1,"flex","flex-col"],[1,"flex","flex-row","justify-between","items-center"],[1,"relative"],["mat-button","","cdkOverlayOrigin","",3,"click"],["trigger","cdkOverlayOrigin"],[1,"space-x-2"],[1,"ri-equalizer-line","text-lg"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","backdropClick"],[1,"flex","flex-row","items-center","gap-x-3"],["mat-stroked-button","","color","warn","class","!border-red-700 !border",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"!flex","!flex-row","!items-center","!space-x-2"],[1,"ri-add-line","text-lg"],[1,"text-white"],[1,"relative","flex-1","overflow-auto","!h-[calc(100vh-185px)]","bg-white","rounded","shadow"],["mat-table","","matSort","","matSortActive","createdAt","matSortDisableClear","","matSortDirection","desc",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","label"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-cell","","class","!text-center w-20 ",4,"matHeaderCellDef"],["mat-header-row","","class","!bg-gray-50",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:!bg-slate-50 cursor-pointer",3,"dblclick",4,"matRowDef","matRowDefColumns"],["class","flex flex-row items-center space-x-1 p-4",4,"ngIf"],["aria-label","S\xE9lectionnez la page des r\xE9sultats de recherche d'apc kouba",1,"!flex","!justify-start","!bg-transparent",3,"showFirstLastButtons","length","pageSize"],[1,"flex","flex-col","min-w-[400px]","max-h-[80vh]","overflow-auto","bg-white","shadow-lg","border","border-gray-200","rounded-sm"],[1,"flex","flex-row","items-center","justify-between","px-4","py-2","bg-slate-100"],[3,"click"],[1,"ri-close-line"],[1,"flex","flex-col","!text-sm","gap-y-2","p-5",3,"formGroup"],["formControlName","label","type","text","myInput",""],["firstFocused",""],[4,"ngIf"],[1,"flex","flex-row","justify-between","p-6"],["mat-stroked-button","","color","secondary",3,"click"],["mat-stroked-button","","color","warn",1,"!border-red-700","!border",3,"click"],[1,"flex","flex-row","items-center","gap-x-2"],[1,"ri-delete-bin-6-line","text-lg"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","",1,"!text-center","w-20"],[1,"flex","flex-row","items-center","space-x-2"],["mat-icon-button","",3,"matTooltip"],[1,"ri-information-line"],["mat-icon-button","",3,"click"],[1,"ri-delete-bin-6-line","text-red-600"],[1,"ri-pencil-line"],["mat-header-row","",1,"!bg-gray-50"],["mat-row","",1,"hover:!bg-slate-50","cursor-pointer",3,"dblclick"],[1,"flex","flex-row","items-center","space-x-1","p-4"],[1,"text-sm","font-light","text-black"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),m(3,"Stock / Cat\xE9gories"),r()(),n(4,"div",2)(5,"div",3)(6,"button",4,5),f("click",function(){return o.toggleFilterMenu()}),n(8,"div",6),p(9,"i",7),n(10,"span"),m(11,"FILTRE"),r()()(),u(12,Ci,18,2,"ng-template",8),f("backdropClick",function(){return o.toggleFilterMenu()}),r(),n(13,"div",9),u(14,xi,5,1,"button",10),n(15,"button",11),f("click",function(){return o.newItem()}),n(16,"div",12),p(17,"i",13),n(18,"span",14),m(19,"Cat\xE9gorie"),r()()()()(),n(20,"div")(21,"div",15)(22,"table",16),y(23,17),u(24,Si,2,3,"th",18)(25,bi,2,2,"td",19),C(),y(26,20),u(27,vi,2,0,"th",18)(28,Fi,2,1,"td",19),C(),y(29,21),u(30,ki,2,0,"th",18)(31,wi,2,1,"td",19),C(),y(32,22),u(33,Ei,2,0,"th",18)(34,Ii,2,1,"td",19),C(),y(35,23),u(36,Gi,2,0,"th",24)(37,Ti,8,1,"td",19),C(),u(38,Mi,1,0,"tr",25)(39,Di,1,0,"tr",26),r(),u(40,Vi,3,0,"div",27),r(),p(41,"mat-paginator",28),r()()),i&2){let s=ge(7);c(12),d("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",o.isFilterMenuOpen)("cdkConnectedOverlayHasBackdrop",!0),c(2),d("ngIf",o.selection.selected.length>0),c(8),d("dataSource",o.dataSource),c(16),d("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),c(),d("matRowDefColumns",o.displayedColumns),c(),d("ngIf",o.dataSource.data.length==0),c(),d("showFirstLastButtons",o.showFirstLastButtons)("length",o.resultsLength)("pageSize",o.pageSize)}},dependencies:[V,A,K,O,q,R,N,Se,Q,he,Ie,Ge,Me,Oe,De,Te,qe,Ve,Qe,Ae,Re,H,P,Ce,ye,j,z,B,ee],styles:[`app-categories-grid{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var Qi=["firstFocused"];function Oi(e,a){if(e&1&&p(0,"my-global-errors",23),e&2){let l=g();d("errors",l.errors)}}function qi(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Ai(e,a){if(e&1&&(y(0),n(1,"option",24),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function Ri(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Ni(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Li(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}var kt=(()=>{let a=class a{constructor(t,i,o,s,_,v){this.fb=t,this.dialogRef=i,this.data=o,this.snackBar=s,this.quantityCorrections=_,this.stocksHttp=v,this.errors=[],this.stocks=[],this.quantityCorrectionFormGroup=this.fb.group({id:[void 0],code:[""],stockId:[void 0,[T.required]],oldQuantity:[{value:0,disabled:!0},[T.required]],newQuantity:[0,[T.required]],date:[Ye(),[T.required]],notes:[""]})}ngOnInit(){this.stocksHttp.getAll().subscribe({next:t=>{this.stocks=t,this.data.mode=="edit"&&this.loadData(this.data.id)}}),this.handleFormChanged()}loadData(t){this.quantityCorrections.getOneById(t).subscribe({next:i=>{this.quantityCorrectionFormGroup.patchValue({id:i.id,code:i.code,stockId:i.stockId.id,oldQuantity:i.oldQuantity,newQuantity:i.newQuantity,date:mt(i.date),notes:i.notes})}})}ngAfterViewInit(){setTimeout(()=>{this.firstFocused.nativeElement.focus()},300)}save(){this.errors=[],this.quantityCorrectionFormGroup.valid==!0?this.data.mode=="creation"?this.quantityCorrections.create(this.getCreation()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.data={id:t.data.id,mode:"edit"},this.loadData(t.data.id)):this.errors=t.errors},error:t=>console.error(t)}):this.quantityCorrections.update(this.data.id,this.getUpdate()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.loadData(t.data.id)):this.errors=t.errors},error:t=>this.snackBar.open("L'op\xE9ration a \xE9chou\xE9","\u274C",{duration:7e3})}):this.quantityCorrectionFormGroup.markAllAsTouched()}resetForm(){this.quantityCorrectionFormGroup.reset({id:void 0,code:"",stockId:void 0,oldQuantity:0,newQuantity:0,date:Ye(),notes:""},{emitEvent:!1})}create(){this.resetForm(),this.firstFocused.nativeElement.focus(),this.quantityCorrectionFormGroup.markAsUntouched(),this.quantityCorrectionFormGroup.clearValidators(),this.quantityCorrectionFormGroup.clearAsyncValidators(),this.data={id:0,mode:"creation"}}getCreation(){return Z({},this.quantityCorrectionFormGroup.getRawValue())}getUpdate(){return Z({},this.quantityCorrectionFormGroup.getRawValue())}closeDialog(){this.dialogRef.close()}handleFormChanged(){this.quantityCorrectionFormGroup.get("stockId")?.valueChanges.subscribe({next:t=>{F(t)?this.stocksHttp.getOneById(t).subscribe({next:i=>{this.quantityCorrectionFormGroup.get("oldQuantity")?.setValue(i.quantity)}}):this.quantityCorrectionFormGroup.get("oldQuantity")?.setValue(0)}})}};a.\u0275fac=function(i){return new(i||a)(h(L),h(we),h(Ee),h($),h(dt),h(se))},a.\u0275cmp=D({type:a,selectors:[["app-quantity-correction-form"]],viewQuery:function(i,o){if(i&1&&E(Qi,5),i&2){let s;I(s=G())&&(o.firstFocused=s.first)}},decls:48,vars:12,consts:[[1,"dialog-container"],[1,"dialog-header"],[1,"text-lg","font-medium"],[3,"click"],[1,"ri-close-line","text-2xl"],["class","px-3",3,"errors",4,"ngIf"],[1,"dialog-content"],[1,"flex","flex-col","gap-y-5","mt-3",3,"formGroup"],["formControlName","id","type","number",1,"!hidden"],[1,"inline-fields"],["formControlName","code","type","text","myInput",""],["firstFocused",""],[3,"required"],["formControlName","date","type","date","myInput",""],[4,"ngIf"],["formControlName","stockId","myInput",""],[4,"ngFor","ngForOf"],["formControlName","oldQuantity","type","number","myInput","","myCalculableField",""],["formControlName","newQuantity","type","number","myInput",""],["formControlName","notes","myTextarea","","type","text"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"px-3",3,"errors"],[3,"value"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3),r(),n(4,"button",3),f("click",function(){return o.closeDialog()}),p(5,"i",4),r()(),u(6,Oi,1,1,"my-global-errors",5),n(7,"div",6)(8,"form",7),p(9,"input",8),n(10,"div",9)(11,"my-form-field")(12,"my-label"),m(13,"Code"),r(),p(14,"input",10,11),r(),n(16,"my-form-field")(17,"my-label",12),m(18,"Date"),r(),p(19,"input",13),u(20,qi,2,0,"my-error",14),r()(),n(21,"div",9)(22,"my-form-field")(23,"my-label",12),m(24,"Stock"),r(),n(25,"select",15),u(26,Ai,3,2,"ng-container",16),r(),u(27,Ri,2,0,"my-error",14),r()(),n(28,"div",9)(29,"my-form-field")(30,"my-label",12),m(31,"Quantit\xE9 actuelle"),r(),p(32,"input",17),u(33,Ni,2,0,"my-error",14),r(),n(34,"my-form-field")(35,"my-label",12),m(36,"Nouvelle quantit\xE9"),r(),p(37,"input",18),u(38,Li,2,0,"my-error",14),r()(),n(39,"my-form-field")(40,"my-label"),m(41,"Notes"),r(),p(42,"textarea",19),r()()(),n(43,"div",20)(44,"button",21),f("click",function(){return o.create()}),m(45,"Nouveau "),r(),n(46,"button",22),f("click",function(){return o.save()}),m(47,"Sauvegarder"),r()()()),i&2){let s,_,v,w;c(3),M(" ",o.data.mode=="creation"?"Nouvelle":"Modifier"," correction "),c(3),d("ngIf",o.errors.length>0),c(2),d("formGroup",o.quantityCorrectionFormGroup),c(9),d("required",!0),c(3),d("ngIf",((s=o.quantityCorrectionFormGroup.get("date"))==null?null:s.invalid)&&(((s=o.quantityCorrectionFormGroup.get("date"))==null?null:s.dirty)||((s=o.quantityCorrectionFormGroup.get("date"))==null?null:s.touched))&&((s=o.quantityCorrectionFormGroup.get("date"))==null?null:s.getError("required"))),c(3),d("required",!0),c(3),d("ngForOf",o.stocks),c(),d("ngIf",((_=o.quantityCorrectionFormGroup.get("stockId"))==null?null:_.invalid)&&(((_=o.quantityCorrectionFormGroup.get("stockId"))==null?null:_.dirty)||((_=o.quantityCorrectionFormGroup.get("stockId"))==null?null:_.touched))&&((_=o.quantityCorrectionFormGroup.get("stockId"))==null?null:_.getError("required"))),c(3),d("required",!0),c(3),d("ngIf",((v=o.quantityCorrectionFormGroup.get("oldQuantity"))==null?null:v.invalid)&&(((v=o.quantityCorrectionFormGroup.get("oldQuantity"))==null?null:v.dirty)||((v=o.quantityCorrectionFormGroup.get("oldQuantity"))==null?null:v.touched))&&((v=o.quantityCorrectionFormGroup.get("oldQuantity"))==null?null:v.getError("required"))),c(2),d("required",!0),c(3),d("ngIf",((w=o.quantityCorrectionFormGroup.get("newQuantity"))==null?null:w.invalid)&&(((w=o.quantityCorrectionFormGroup.get("newQuantity"))==null?null:w.dirty)||((w=o.quantityCorrectionFormGroup.get("newQuantity"))==null?null:w.touched))&&((w=o.quantityCorrectionFormGroup.get("newQuantity"))==null?null:w.getError("required")))}},dependencies:[ne,V,A,ae,le,K,xe,oe,O,q,R,N,Q,j,be,z,B,ee,ve,tt],styles:[`app-quantity-correction-form{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var Hi=["firstFocused"];function zi(e,a){if(e&1&&(y(0),n(1,"option",42),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function Bi(e,a){if(e&1){let l=k();n(0,"div",32)(1,"div",33)(2,"span"),m(3,"Filtrer"),r(),n(4,"button",34),f("click",function(){x(l);let i=g();return S(i.toggleFilterMenu())}),p(5,"i",35),r()(),n(6,"form",36)(7,"my-form-field")(8,"my-label",37),m(9,"Stock"),r(),n(10,"select",38),u(11,zi,3,2,"ng-container",39),r()()(),n(12,"div",40)(13,"button",41),f("click",function(){x(l);let i=g();return S(i.resetItemsFilterForm())}),m(14,"R\xE9initialiser"),r(),n(15,"button",11),f("click",function(){x(l);let i=g();return S(i.filterItems())}),m(16,"Appliquer"),r()()()}if(e&2){let l=g();c(6),d("formGroup",l.stockFilterFormGroup),c(2),d("required",!0),c(3),d("ngForOf",l.stocks)}}function ji(e,a){if(e&1){let l=k();n(0,"button",43),f("click",function(){x(l);let i=g();return S(i.deleteSeleted())}),n(1,"div",44),p(2,"i",45),n(3,"span"),m(4),r()()()}if(e&2){let l=g();c(4),M("Supprimer (",l.selection.selected.length,")")}}function $i(e,a){if(e&1){let l=k();n(0,"th",46)(1,"mat-checkbox",47),f("change",function(i){x(l);let o=g();return S(o.allSelectionChanged(i))}),r()()}if(e&2){let l=g();c(),d("checked",l.selection.hasValue()&&l.isAllSelected())("indeterminate",l.selection.hasValue()&&!l.isAllSelected())("aria-label",l.checkboxLabel())}}function Pi(e,a){if(e&1){let l=k();n(0,"td",48)(1,"mat-checkbox",49),f("click",function(i){return i.stopPropagation()})("change",function(i){let s=x(l).$implicit,_=g();return S(_.selectionChanged(i,s))}),r()()}if(e&2){let l=a.$implicit,t=g();c(),d("checked",t.selection.isSelected(l))("aria-label",t.checkboxLabel(l))}}function Ui(e,a){e&1&&(n(0,"th",46),m(1,"Code "),r())}function Wi(e,a){if(e&1&&(n(0,"td",48),m(1),r()),e&2){let l=a.$implicit;c(),b(l.code)}}function Ji(e,a){e&1&&(n(0,"th",46),m(1,"Libell\xE9 "),r())}function Ki(e,a){if(e&1&&(n(0,"td",48),m(1),re(2,"myLimitTextLength"),r()),e&2){let l=a.$implicit;c(),b(Le(2,1,l.stockId.label,30))}}function Zi(e,a){e&1&&(n(0,"th",46),m(1,"Ancienne quantit\xE9 "),r())}function Xi(e,a){if(e&1&&(n(0,"td",48),m(1),r()),e&2){let l=a.$implicit;c(),b(l.oldQuantity)}}function Yi(e,a){e&1&&(n(0,"th",46),m(1,"Nouvelle quantit\xE9 "),r())}function er(e,a){if(e&1&&(n(0,"td",48),m(1),r()),e&2){let l=a.$implicit;c(),b(l.newQuantity)}}function tr(e,a){e&1&&(n(0,"th",46),m(1,"Date "),r())}function ir(e,a){if(e&1&&(n(0,"td",48),m(1),re(2,"date"),r()),e&2){let l=a.$implicit;c(),b(Le(2,1,l.date,"dd/MM/yyyy"))}}function rr(e,a){e&1&&(n(0,"th",46),m(1,"Notes"),r())}function nr(e,a){if(e&1&&(n(0,"td",48),m(1),r()),e&2){let l=a.$implicit;c(),b(l.notes)}}function or(e,a){e&1&&(n(0,"th",50),m(1,"Action"),r())}function ar(e,a){if(e&1&&(n(0,"td",48)(1,"div",51)(2,"button",52),p(3,"i",53),r()()()),e&2){let l=a.$implicit,t=g();c(2),d("matTooltip",t.getTracabilityInfo(l))}}function lr(e,a){e&1&&p(0,"tr",54)}function sr(e,a){e&1&&p(0,"tr",55)}function mr(e,a){e&1&&(n(0,"div",56)(1,"p",57),m(2,"Aucune donn\xE9e \xE0 afficher"),r()())}var wt=(()=>{let a=class a{isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.data.length;return t===i}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:`${this.isAllSelected()?"deselect":"select"} all`}constructor(t,i,o,s,_,v){this.stocksHttp=t,this.quantityCorrectionsHttp=i,this.snackBar=o,this.fb=s,this.matDialog=_,this.traceability=v,this.dataSource=new Ne([]),this.displayedColumns=["select","code","stockId.label","oldQuantity","newQuantity","date","actions"],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.isFilterMenuOpen=!1,this.refreshGrid=new X,this.stockFilterChanged=new X,this.pageSize=Y.pagination.pageSize,this.stocks=[],this.selection=new _e(!0,[]),this.showFirstLastButtons=Y.pagination.showFirstLastButtons,this.stockFilterFormGroup=this.fb.group({stockId:[void 0]})}ngOnInit(){this.stocksHttp.getAll().subscribe({next:t=>this.stocks=t})}ngAfterViewInit(){this.sort.sortChange.subscribe({next:()=>this.paginator.pageIndex=0}),de(this.sort.sortChange,this.paginator.page,this.refreshGrid,this.stockFilterChanged).pipe(pe({}),fe(()=>(this.isLoadingResults=!0,this.quantityCorrectionsHttp.paginate(this.getFilterQuery).pipe(ue(()=>ie(null))))),ce(t=>(this.isLoadingResults=!1,this.isRateLimitReached=t?.data===null,ke(t)?[]:(this.resultsLength=t?.count,t?.items)))).subscribe({next:t=>this.dataSource.data=t})}newItem(t="creation",i=0){this.matDialog.open(kt,{data:{id:i,mode:t},minWidth:"512px",disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:o=>this.refreshGrid.emit()})}deleteItem(t){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany([t])}deleteSeleted(){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany(this.selection.selected)}filterItems(){this.stockFilterChanged.emit()}resetItemsFilterForm(){this.stockFilterFormGroup.reset({stockId:void 0}),this.stockFilterChanged.emit()}toggleFilterMenu(){this.isFilterMenuOpen=!this.isFilterMenuOpen,this.isFilterMenuOpen&&setTimeout(()=>{this.firstFocused?.nativeElement.focus()},200)}allSelectionChanged(t){t&&this.toggleAllRows()}selectionChanged(t,i){t&&this.selection.toggle(i)}deleteMany(t){let i=new URLSearchParams;t.forEach(s=>{i.append("id",s.id.toString())});let o=`?${i.toString()}`;this.quantityCorrectionsHttp.deleteMany(o).subscribe({next:s=>{s.success&&(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.refreshGrid.emit(),this.selection.clear())},error:s=>this.snackBar.open(s.message)})}get getFilterQuery(){let t=new URLSearchParams,i={pageIndex:this.paginator.pageIndex,pageSize:this.pageSize,stockId:this.stockFilterFormGroup.get("stockId")?.value};return F(i.pageIndex)&&t.append("pageIndex",i.pageIndex.toString()),F(i.pageSize)&&t.append("pageSize",i.pageSize.toString()),t.append("order","DESC"),F(i.stockId)&&t.append("stockId",i.stockId),`?${t.toString()}`}getTracabilityInfo(t){return this.traceability.info(t)}};a.\u0275fac=function(i){return new(i||a)(h(se),h(dt),h($),h(L),h(te),h(Fe))},a.\u0275cmp=D({type:a,selectors:[["app-quantity-corrections-grid"]],viewQuery:function(i,o){if(i&1&&(E(H,5),E(P,5),E(Hi,5)),i&2){let s;I(s=G())&&(o.paginator=s.first),I(s=G())&&(o.sort=s.first),I(s=G())&&(o.firstFocused=s.first)}},decls:51,vars:12,consts:[[1,"flex","flex-1","flex-col","p-3","bg-secondary-50","gap-y-2"],[1,"flex","flex-col"],[1,"flex","flex-row","justify-between","items-center"],[1,"relative"],["mat-button","","cdkOverlayOrigin","",3,"click"],["trigger","cdkOverlayOrigin"],[1,"space-x-2"],[1,"ri-equalizer-line","text-lg"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","backdropClick"],[1,"flex","flex-row","items-center","gap-x-3"],["mat-stroked-button","","color","warn","class","!border-red-700 !border",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"!flex","!flex-row","!items-center","!space-x-2"],[1,"ri-add-line","text-lg"],[1,"text-white"],[1,"relative","flex-1","overflow-auto","!h-[calc(100vh-185px)]","bg-white","rounded","shadow"],["mat-table","","matSort","","matSortActive","createdAt","matSortDisableClear","","matSortDirection","desc",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","stockId.label"],["matColumnDef","oldQuantity"],["matColumnDef","newQuantity"],["matColumnDef","date"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-cell","","class","!text-center w-20 ",4,"matHeaderCellDef"],["mat-header-row","","class","!bg-gray-50",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:!bg-slate-50 cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","flex flex-row items-center space-x-1 p-4",4,"ngIf"],["aria-label","S\xE9lectionnez la page des r\xE9sultats de recherche d'apc kouba",1,"!flex","!justify-start","!bg-transparent",3,"showFirstLastButtons","length","pageSize"],[1,"flex","flex-col","min-w-[400px]","max-h-[80vh]","overflow-auto","bg-white","shadow-lg","border","border-gray-200","rounded-sm"],[1,"flex","flex-row","items-center","justify-between","px-4","py-2","bg-slate-100"],[3,"click"],[1,"ri-close-line"],[1,"flex","flex-col","!text-sm","gap-y-2","p-5",3,"formGroup"],[3,"required"],["formControlName","stockId","myInput",""],[4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-between","p-6"],["mat-stroked-button","","color","secondary",3,"click"],[3,"value"],["mat-stroked-button","","color","warn",1,"!border-red-700","!border",3,"click"],[1,"flex","flex-row","items-center","gap-x-2"],[1,"ri-delete-bin-6-line","text-lg"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],["mat-header-cell","",1,"!text-center","w-20"],[1,"flex","flex-row","items-center","space-x-2"],["mat-icon-button","",3,"matTooltip"],[1,"ri-information-line"],["mat-header-row","",1,"!bg-gray-50"],["mat-row","",1,"hover:!bg-slate-50","cursor-pointer"],[1,"flex","flex-row","items-center","space-x-1","p-4"],[1,"text-sm","font-light","text-black"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),m(3,"Stocks / Corrections quantit\xE9"),r()(),n(4,"div",2)(5,"div",3)(6,"button",4,5),f("click",function(){return o.toggleFilterMenu()}),n(8,"div",6),p(9,"i",7),n(10,"span"),m(11,"FILTRE"),r()()(),u(12,Bi,17,3,"ng-template",8),f("backdropClick",function(){return o.toggleFilterMenu()}),r(),n(13,"div",9),u(14,ji,5,1,"button",10),n(15,"button",11),f("click",function(){return o.newItem()}),n(16,"div",12),p(17,"i",13),n(18,"span",14),m(19,"Correction"),r()()()()(),n(20,"div")(21,"div",15)(22,"table",16),y(23,17),u(24,$i,2,3,"th",18)(25,Pi,2,2,"td",19),C(),y(26,20),u(27,Ui,2,0,"th",18)(28,Wi,2,1,"td",19),C(),y(29,21),u(30,Ji,2,0,"th",18)(31,Ki,3,4,"td",19),C(),y(32,22),u(33,Zi,2,0,"th",18)(34,Xi,2,1,"td",19),C(),y(35,23),u(36,Yi,2,0,"th",18)(37,er,2,1,"td",19),C(),y(38,24),u(39,tr,2,0,"th",18)(40,ir,3,4,"td",19),C(),y(41,25),u(42,rr,2,0,"th",18)(43,nr,2,1,"td",19),C(),y(44,26),u(45,or,2,0,"th",27)(46,ar,4,1,"td",19),C(),u(47,lr,1,0,"tr",28)(48,sr,1,0,"tr",29),r(),u(49,mr,3,0,"div",30),r(),p(50,"mat-paginator",31),r()()),i&2){let s=ge(7);c(12),d("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",o.isFilterMenuOpen)("cdkConnectedOverlayHasBackdrop",!0),c(2),d("ngIf",o.selection.selected.length>0),c(8),d("dataSource",o.dataSource),c(25),d("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),c(),d("matRowDefColumns",o.displayedColumns),c(),d("ngIf",o.dataSource.data.length==0),c(),d("showFirstLastButtons",o.showFirstLastButtons)("length",o.resultsLength)("pageSize",o.pageSize)}},dependencies:[ne,V,A,ae,le,oe,O,q,R,N,Se,Q,he,Ie,Ge,Me,Oe,De,Te,qe,Ve,Qe,Ae,Re,H,P,Ce,ye,j,z,B,st,et],styles:[`app-quantity-corrections-grid{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var cr=["firstFocused"];function dr(e,a){if(e&1&&p(0,"my-global-errors",29),e&2){let l=g();d("errors",l.errors)}}function ur(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function pr(e,a){if(e&1&&(y(0),n(1,"option",30),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function fr(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function gr(e,a){if(e&1&&(y(0),n(1,"option",30),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function hr(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function _r(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function yr(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Cr(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function xr(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}function Sr(e,a){e&1&&(n(0,"my-error"),m(1," Veuillez remplir ce champ. "),r())}var Et=(()=>{let a=class a{constructor(t,i,o,s,_,v){this.fb=t,this.dialogRef=i,this.data=o,this.snackBar=s,this.statusTransfers=_,this.stocksHttp=v,this.errors=[],this.freeStocks=[],this.frozenStocks=[],this.statusTransferFormGroup=this.fb.group({id:[void 0],code:[""],freeStockId:[void 0,[T.required]],frozenStockId:[void 0,[T.required]],oldFreeQuantity:[{value:0,disabled:!0},[T.required]],newFreeQuantity:[{value:0,disabled:!0},[T.required]],transferedQuantity:[0,[T.required]],oldFrozenQuantity:[{value:0,disabled:!0},[T.required]],newFrozenQuantity:[{value:0,disabled:!0},[T.required]],date:[Ye(),[T.required]],notes:[""]})}ngOnInit(){this.stocksHttp.getStocksByStatus("free").subscribe({next:t=>{this.stocksHttp.getStocksByStatus("frozen").subscribe({next:i=>{this.freeStocks=t,this.frozenStocks=i,this.data.mode=="edit"&&this.loadData(this.data.id)}})}}),this.handleFormChanged()}loadData(t){this.statusTransfers.getOneById(t).subscribe({next:i=>{this.statusTransferFormGroup.patchValue({id:i.id,code:i.code,freeStockId:i.freeStockId.id,frozenStockId:i.frozenStockId.id,oldFreeQuantity:i.oldFreeQuantity,oldFrozenQuantity:i.oldFrozenQuantity,transferedQuantity:i.transferedQuantity,newFreeQuantity:i.newFreeQuantity,newFrozenQuantity:i.newFrozenQuantity,date:mt(i.date),notes:i.notes})}})}ngAfterViewInit(){setTimeout(()=>{this.firstFocused.nativeElement.focus()},300)}save(){this.errors=[],this.statusTransferFormGroup.valid==!0?this.data.mode=="creation"?this.statusTransfers.create(this.getCreation()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.create()):this.errors=t.errors},error:t=>console.error(t)}):this.statusTransfers.update(this.data.id,this.getUpdate()).subscribe({next:t=>{t.success?(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.loadData(t.data.id)):this.errors=t.errors},error:t=>this.snackBar.open("L'op\xE9ration a \xE9chou\xE9","\u274C",{duration:7e3})}):this.statusTransferFormGroup.markAllAsTouched()}resetForm(){this.statusTransferFormGroup.reset({id:void 0,code:"",freeStockId:void 0,frozenStockId:void 0,oldFreeQuantity:0,newFreeQuantity:0,transferedQuantity:0,oldFrozenQuantity:0,newFrozenQuantity:0,date:Ye(),notes:""},{emitEvent:!1})}create(){this.resetForm(),this.firstFocused.nativeElement.focus(),this.statusTransferFormGroup.markAsUntouched(),this.statusTransferFormGroup.clearValidators(),this.statusTransferFormGroup.clearAsyncValidators(),this.data={id:0,mode:"creation"}}getCreation(){return Z({},this.statusTransferFormGroup.getRawValue())}getUpdate(){return Z({},this.statusTransferFormGroup.getRawValue())}closeDialog(){this.dialogRef.close()}handleFormChanged(){this.statusTransferFormGroup.get("freeStockId")?.valueChanges.subscribe({next:t=>{F(t)?this.stocksHttp.getFrozenStockByStockId(t).subscribe({next:i=>{this.stocksHttp.getOneById(t).subscribe({next:o=>{F(i)?(this.statusTransferFormGroup.get("frozenStockId")?.setValue(i.id),this.statusTransferFormGroup.get("oldFreeQuantity")?.setValue(o.quantity),this.statusTransferFormGroup.get("oldFrozenQuantity")?.setValue(i.quantity),this.statusTransferFormGroup.get("newFreeQuantity")?.setValue(o.quantity),this.statusTransferFormGroup.get("newFrozenQuantity")?.setValue(i.quantity)):alert("Vous n'avez pas de produit en \xE9tat congel\xE9")}})}}):this.statusTransferFormGroup.get("frozenStockId")?.setValue(void 0)}}),this.statusTransferFormGroup.get("transferedQuantity")?.valueChanges.subscribe({next:t=>{let i=ct(t),o=ct(this.statusTransferFormGroup.get("oldFreeQuantity")?.value),s=ct(this.statusTransferFormGroup.get("oldFrozenQuantity")?.value);this.statusTransferFormGroup.get("newFreeQuantity")?.setValue(o-i),this.statusTransferFormGroup.get("newFrozenQuantity")?.setValue(s+i)}})}};a.\u0275fac=function(i){return new(i||a)(h(L),h(we),h(Ee),h($),h(ut),h(se))},a.\u0275cmp=D({type:a,selectors:[["app-status-transfer-form"]],viewQuery:function(i,o){if(i&1&&E(cr,5),i&2){let s;I(s=G())&&(o.firstFocused=s.first)}},decls:76,vars:21,consts:[[1,"dialog-container"],[1,"dialog-header"],[1,"text-lg","font-medium"],[3,"click"],[1,"ri-close-line","text-2xl"],["class","px-3",3,"errors",4,"ngIf"],[1,"dialog-content"],[1,"flex","flex-col","gap-y-5","mt-3",3,"formGroup"],["formControlName","id","type","number",1,"!hidden"],[1,"inline-fields"],["formControlName","code","type","text","myInput",""],["firstFocused",""],[3,"required"],["formControlName","date","type","date","myInput",""],[4,"ngIf"],["formControlName","freeStockId","myInput",""],[4,"ngFor","ngForOf"],[1,"mt-10"],[1,"ri-arrow-right-line","text-xl"],["formControlName","frozenStockId","myInput",""],["formControlName","oldFreeQuantity","type","number","myInput","","myCalculableField",""],["formControlName","transferedQuantity","type","number","myInput",""],["formControlName","oldFrozenQuantity","type","number","myInput","","myCalculableField",""],["formControlName","newFreeQuantity","type","number","myInput","","myCalculableField",""],["formControlName","newFrozenQuantity","type","number","myInput","","myCalculableField",""],["formControlName","notes","myTextarea","","type","text"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"px-3",3,"errors"],[3,"value"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3),r(),n(4,"button",3),f("click",function(){return o.closeDialog()}),p(5,"i",4),r()(),u(6,dr,1,1,"my-global-errors",5),n(7,"div",6)(8,"form",7),p(9,"input",8),n(10,"div",9)(11,"my-form-field")(12,"my-label"),m(13,"Code"),r(),p(14,"input",10,11),r(),n(16,"my-form-field")(17,"my-label",12),m(18,"Date"),r(),p(19,"input",13),u(20,ur,2,0,"my-error",14),r()(),n(21,"div",9)(22,"my-form-field")(23,"my-label",12),m(24,"Stock (Frais)"),r(),n(25,"select",15),u(26,pr,3,2,"ng-container",16),r(),u(27,fr,2,0,"my-error",14),r(),n(28,"div",17),p(29,"i",18),r(),n(30,"my-form-field")(31,"my-label",12),m(32,"Stock (Congel\xE9)"),r(),n(33,"select",19),u(34,gr,3,2,"ng-container",16),r(),u(35,hr,2,0,"my-error",14),r()(),n(36,"div",9)(37,"my-form-field")(38,"my-label",12),m(39,"Quantit\xE9 actuelle (Frais)"),r(),p(40,"input",20),u(41,_r,2,0,"my-error",14),r(),n(42,"div",17),p(43,"i",18),r(),n(44,"my-form-field")(45,"my-label",12),m(46,"Quantit\xE9 transf\xE9r\xE9e"),r(),p(47,"input",21),u(48,yr,2,0,"my-error",14),r(),n(49,"div",17),p(50,"i",18),r(),n(51,"my-form-field")(52,"my-label",12),m(53,"Ancienne quantit\xE9 (Congel\xE9)"),r(),p(54,"input",22),u(55,Cr,2,0,"my-error",14),r()(),n(56,"div",9)(57,"my-form-field")(58,"my-label",12),m(59,"Nouvelle quantit\xE9 (Frais)"),r(),p(60,"input",23),u(61,xr,2,0,"my-error",14),r(),n(62,"my-form-field")(63,"my-label",12),m(64,"Nouvelle quantit\xE9 (Congel\xE9)"),r(),p(65,"input",24),u(66,Sr,2,0,"my-error",14),r()(),n(67,"my-form-field")(68,"my-label"),m(69,"Notes"),r(),p(70,"textarea",25),r()()(),n(71,"div",26)(72,"button",27),f("click",function(){return o.create()}),m(73,"Nouveau "),r(),n(74,"button",28),f("click",function(){return o.save()}),m(75,"Sauvegarder"),r()()()),i&2){let s,_,v,w,U,W,J,Ke;c(3),M(" ",o.data.mode=="creation"?"Nouveau":"Modifier"," transfer "),c(3),d("ngIf",o.errors.length>0),c(2),d("formGroup",o.statusTransferFormGroup),c(9),d("required",!0),c(3),d("ngIf",((s=o.statusTransferFormGroup.get("date"))==null?null:s.invalid)&&(((s=o.statusTransferFormGroup.get("date"))==null?null:s.dirty)||((s=o.statusTransferFormGroup.get("date"))==null?null:s.touched))&&((s=o.statusTransferFormGroup.get("date"))==null?null:s.getError("required"))),c(3),d("required",!0),c(3),d("ngForOf",o.freeStocks),c(),d("ngIf",((_=o.statusTransferFormGroup.get("freeStockId"))==null?null:_.invalid)&&(((_=o.statusTransferFormGroup.get("freeStockId"))==null?null:_.dirty)||((_=o.statusTransferFormGroup.get("freeStockId"))==null?null:_.touched))&&((_=o.statusTransferFormGroup.get("freeStockId"))==null?null:_.getError("required"))),c(4),d("required",!0),c(3),d("ngForOf",o.frozenStocks),c(),d("ngIf",((v=o.statusTransferFormGroup.get("frozenStockId"))==null?null:v.invalid)&&(((v=o.statusTransferFormGroup.get("frozenStockId"))==null?null:v.dirty)||((v=o.statusTransferFormGroup.get("frozenStockId"))==null?null:v.touched))&&((v=o.statusTransferFormGroup.get("frozenStockId"))==null?null:v.getError("required"))),c(3),d("required",!0),c(3),d("ngIf",((w=o.statusTransferFormGroup.get("oldFreeQuantity"))==null?null:w.invalid)&&(((w=o.statusTransferFormGroup.get("oldFreeQuantity"))==null?null:w.dirty)||((w=o.statusTransferFormGroup.get("oldFreeQuantity"))==null?null:w.touched))&&((w=o.statusTransferFormGroup.get("oldFreeQuantity"))==null?null:w.getError("required"))),c(4),d("required",!0),c(3),d("ngIf",((U=o.statusTransferFormGroup.get("transferedQuantity"))==null?null:U.invalid)&&(((U=o.statusTransferFormGroup.get("transferedQuantity"))==null?null:U.dirty)||((U=o.statusTransferFormGroup.get("transferedQuantity"))==null?null:U.touched))&&((U=o.statusTransferFormGroup.get("transferedQuantity"))==null?null:U.getError("required"))),c(4),d("required",!0),c(3),d("ngIf",((W=o.statusTransferFormGroup.get("oldFrozenQuantity"))==null?null:W.invalid)&&(((W=o.statusTransferFormGroup.get("oldFrozenQuantity"))==null?null:W.dirty)||((W=o.statusTransferFormGroup.get("oldFrozenQuantity"))==null?null:W.touched))&&((W=o.statusTransferFormGroup.get("oldFrozenQuantity"))==null?null:W.getError("required"))),c(3),d("required",!0),c(3),d("ngIf",((J=o.statusTransferFormGroup.get("newFreeQuantity"))==null?null:J.invalid)&&(((J=o.statusTransferFormGroup.get("newFreeQuantity"))==null?null:J.dirty)||((J=o.statusTransferFormGroup.get("newFreeQuantity"))==null?null:J.touched))&&((J=o.statusTransferFormGroup.get("newFreeQuantity"))==null?null:J.getError("required"))),c(2),d("required",!0),c(3),d("ngIf",((Ke=o.statusTransferFormGroup.get("newFrozenQuantity"))==null?null:Ke.invalid)&&(((Ke=o.statusTransferFormGroup.get("newFrozenQuantity"))==null?null:Ke.dirty)||((Ke=o.statusTransferFormGroup.get("newFrozenQuantity"))==null?null:Ke.touched))&&((Ke=o.statusTransferFormGroup.get("newFrozenQuantity"))==null?null:Ke.getError("required")))}},dependencies:[ne,V,A,ae,le,K,xe,oe,O,q,R,N,Q,j,be,z,B,ee,ve,tt],styles:[`app-status-transfer-form{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var br=["firstFocused"];function vr(e,a){if(e&1&&(y(0),n(1,"option",44),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function Fr(e,a){if(e&1){let l=k();n(0,"div",34)(1,"div",35)(2,"span"),m(3,"Filtrer"),r(),n(4,"button",36),f("click",function(){x(l);let i=g();return S(i.toggleFilterMenu())}),p(5,"i",37),r()(),n(6,"form",38)(7,"my-form-field")(8,"my-label",39),m(9,"Stock"),r(),n(10,"select",40),u(11,vr,3,2,"ng-container",41),r()()(),n(12,"div",42)(13,"button",43),f("click",function(){x(l);let i=g();return S(i.resetItemsFilterForm())}),m(14,"R\xE9initialiser"),r(),n(15,"button",11),f("click",function(){x(l);let i=g();return S(i.filterItems())}),m(16,"Appliquer"),r()()()}if(e&2){let l=g();c(6),d("formGroup",l.stockFilterFormGroup),c(2),d("required",!0),c(3),d("ngForOf",l.stocks)}}function kr(e,a){if(e&1){let l=k();n(0,"button",45),f("click",function(){x(l);let i=g();return S(i.deleteSeleted())}),n(1,"div",46),p(2,"i",47),n(3,"span"),m(4),r()()()}if(e&2){let l=g();c(4),M("Supprimer (",l.selection.selected.length,")")}}function wr(e,a){if(e&1){let l=k();n(0,"th",48)(1,"mat-checkbox",49),f("change",function(i){x(l);let o=g();return S(o.allSelectionChanged(i))}),r()()}if(e&2){let l=g();c(),d("checked",l.selection.hasValue()&&l.isAllSelected())("indeterminate",l.selection.hasValue()&&!l.isAllSelected())("aria-label",l.checkboxLabel())}}function Er(e,a){if(e&1){let l=k();n(0,"td",50)(1,"mat-checkbox",51),f("click",function(i){return i.stopPropagation()})("change",function(i){let s=x(l).$implicit,_=g();return S(_.selectionChanged(i,s))}),r()()}if(e&2){let l=a.$implicit,t=g();c(),d("checked",t.selection.isSelected(l))("aria-label",t.checkboxLabel(l))}}function Ir(e,a){e&1&&(n(0,"th",48),m(1,"Code "),r())}function Gr(e,a){if(e&1&&(n(0,"td",50),m(1),r()),e&2){let l=a.$implicit;c(),b(l.code)}}function Tr(e,a){e&1&&(n(0,"th",48),m(1,"Stock (Frais) "),r())}function Mr(e,a){if(e&1&&(n(0,"td",50),m(1),re(2,"myLimitTextLength"),r()),e&2){let l=a.$implicit;c(),b(Le(2,1,l.freeStockId==null?null:l.freeStockId.label,30))}}function Dr(e,a){e&1&&(n(0,"th",48),m(1,"Stock (Congel\xE9) "),r())}function Vr(e,a){if(e&1&&(n(0,"td",50),m(1),re(2,"myLimitTextLength"),r()),e&2){let l=a.$implicit;c(),b(Le(2,1,l.frozenStockId==null?null:l.frozenStockId.label,30))}}function Qr(e,a){e&1&&(n(0,"th",48),m(1,"Quantit\xE9 transf\xE9r\xE9e"),r())}function Or(e,a){if(e&1&&(n(0,"td",50),m(1),r()),e&2){let l=a.$implicit;c(),b(l.transferedQuantity)}}function qr(e,a){e&1&&(n(0,"th",48),m(1,"Quantit\xE9 (Frais) "),r())}function Ar(e,a){if(e&1&&(n(0,"td",50)(1,"div",52),m(2),p(3,"i",53),m(4),r()()),e&2){let l=a.$implicit;c(2),M(" ",l.oldFreeQuantity," "),c(2),M(" ",l.newFreeQuantity," ")}}function Rr(e,a){e&1&&(n(0,"th",48),m(1,"Quantit\xE9 (Congel\xE9) "),r())}function Nr(e,a){if(e&1&&(n(0,"td",50)(1,"div",52),m(2),p(3,"i",54),m(4),r()()),e&2){let l=a.$implicit;c(2),M(" ",l.oldFrozenQuantity," "),c(2),M(" ",l.newFrozenQuantity," ")}}function Lr(e,a){e&1&&(n(0,"th",48),m(1,"Date "),r())}function Hr(e,a){if(e&1&&(n(0,"td",50),m(1),re(2,"date"),r()),e&2){let l=a.$implicit;c(),b(Le(2,1,l.date,"dd/MM/yyyy"))}}function zr(e,a){e&1&&(n(0,"th",48),m(1,"Notes"),r())}function Br(e,a){if(e&1&&(n(0,"td",50),m(1),r()),e&2){let l=a.$implicit;c(),b(l.notes)}}function jr(e,a){e&1&&(n(0,"th",55),m(1,"Action"),r())}function $r(e,a){if(e&1&&(n(0,"td",50)(1,"div",56)(2,"button",57),p(3,"i",58),r()()()),e&2){let l=a.$implicit,t=g();c(2),d("matTooltip",t.getTracabilityInfo(l))}}function Pr(e,a){e&1&&p(0,"tr",59)}function Ur(e,a){e&1&&p(0,"tr",60)}function Wr(e,a){e&1&&(n(0,"div",61)(1,"p",62),m(2,"Aucune donn\xE9e \xE0 afficher"),r()())}var It=(()=>{let a=class a{isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.data.length;return t===i}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:`${this.isAllSelected()?"deselect":"select"} all`}constructor(t,i,o,s,_,v){this.snackBar=t,this.fb=i,this.matDialog=o,this.traceability=s,this.stocksHttp=_,this.statusTransfersHttp=v,this.dataSource=new Ne([]),this.displayedColumns=["select","code","freeStockId.label","frozenStockId.label","transferedQuantity","freeQuantity","frozenQuantity","date","actions"],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.isFilterMenuOpen=!1,this.refreshGrid=new X,this.stockFilterChanged=new X,this.pageSize=Y.pagination.pageSize,this.stocks=[],this.selection=new _e(!0,[]),this.showFirstLastButtons=Y.pagination.showFirstLastButtons,this.stockFilterFormGroup=this.fb.group({freeStockId:[void 0]})}ngOnInit(){this.stocksHttp.getAll().subscribe({next:t=>this.stocks=t})}ngAfterViewInit(){this.sort.sortChange.subscribe({next:()=>this.paginator.pageIndex=0}),de(this.sort.sortChange,this.paginator.page,this.refreshGrid,this.stockFilterChanged).pipe(pe({}),fe(()=>(this.isLoadingResults=!0,this.statusTransfersHttp.paginate(this.getFilterQuery).pipe(ue(()=>ie(null))))),ce(t=>(this.isLoadingResults=!1,this.isRateLimitReached=t?.data===null,ke(t)?[]:(this.resultsLength=t?.count,t?.items)))).subscribe({next:t=>this.dataSource.data=t})}newItem(t="creation",i=0){this.matDialog.open(Et,{data:{id:i,mode:t},disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:o=>this.refreshGrid.emit()})}deleteItem(t){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany([t])}deleteSeleted(){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany(this.selection.selected)}filterItems(){this.stockFilterChanged.emit()}resetItemsFilterForm(){this.stockFilterFormGroup.reset({freeStockId:void 0}),this.stockFilterChanged.emit()}toggleFilterMenu(){this.isFilterMenuOpen=!this.isFilterMenuOpen,this.isFilterMenuOpen&&setTimeout(()=>{this.firstFocused?.nativeElement.focus()},200)}allSelectionChanged(t){t&&this.toggleAllRows()}selectionChanged(t,i){t&&this.selection.toggle(i)}deleteMany(t){let i=new URLSearchParams;t.forEach(s=>{i.append("id",s.id.toString())});let o=`?${i.toString()}`;this.statusTransfersHttp.deleteMany(o).subscribe({next:s=>{s.success&&(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.refreshGrid.emit(),this.selection.clear())},error:s=>this.snackBar.open(s.message)})}get getFilterQuery(){let t=new URLSearchParams,i={pageIndex:this.paginator.pageIndex,pageSize:this.pageSize,freeStockId:this.stockFilterFormGroup.get("freeStockId")?.value};return F(i.pageIndex)&&t.append("pageIndex",i.pageIndex.toString()),F(i.pageSize)&&t.append("pageSize",i.pageSize.toString()),t.append("order","DESC"),F(i.freeStockId)&&t.append("freeStockId",i.freeStockId),`?${t.toString()}`}getTracabilityInfo(t){return this.traceability.info(t)}};a.\u0275fac=function(i){return new(i||a)(h($),h(L),h(te),h(Fe),h(se),h(ut))},a.\u0275cmp=D({type:a,selectors:[["app-status-transfers-grid"]],viewQuery:function(i,o){if(i&1&&(E(H,5),E(P,5),E(br,5)),i&2){let s;I(s=G())&&(o.paginator=s.first),I(s=G())&&(o.sort=s.first),I(s=G())&&(o.firstFocused=s.first)}},decls:57,vars:12,consts:[[1,"flex","flex-1","flex-col","p-3","bg-secondary-50","gap-y-2"],[1,"flex","flex-col"],[1,"flex","flex-row","justify-between","items-center"],[1,"relative"],["mat-button","","cdkOverlayOrigin","",3,"click"],["trigger","cdkOverlayOrigin"],[1,"space-x-2"],[1,"ri-equalizer-line","text-lg"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","backdropClick"],[1,"flex","flex-row","items-center","gap-x-3"],["mat-stroked-button","","color","warn","class","!border-red-700 !border",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"!flex","!flex-row","!items-center","!space-x-2"],[1,"ri-add-line","text-lg"],[1,"text-white"],[1,"relative","flex-1","overflow-auto","!h-[calc(100vh-185px)]","bg-white","rounded","shadow"],["mat-table","","matSort","","matSortActive","createdAt","matSortDisableClear","","matSortDirection","desc",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","freeStockId.label"],["matColumnDef","frozenStockId.label"],["matColumnDef","transferedQuantity"],["matColumnDef","freeQuantity"],["matColumnDef","frozenQuantity"],["matColumnDef","date"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-cell","","class","!text-center w-20 ",4,"matHeaderCellDef"],["mat-header-row","","class","!bg-gray-50",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:!bg-slate-50 cursor-pointer",4,"matRowDef","matRowDefColumns"],["class","flex flex-row items-center space-x-1 p-4",4,"ngIf"],["aria-label","S\xE9lectionnez la page des r\xE9sultats de recherche d'apc kouba",1,"!flex","!justify-start","!bg-transparent",3,"showFirstLastButtons","length","pageSize"],[1,"flex","flex-col","min-w-[400px]","max-h-[80vh]","overflow-auto","bg-white","shadow-lg","border","border-gray-200","rounded-sm"],[1,"flex","flex-row","items-center","justify-between","px-4","py-2","bg-slate-100"],[3,"click"],[1,"ri-close-line"],[1,"flex","flex-col","!text-sm","gap-y-2","p-5",3,"formGroup"],[3,"required"],["formControlName","freeStockId","myInput",""],[4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-between","p-6"],["mat-stroked-button","","color","secondary",3,"click"],[3,"value"],["mat-stroked-button","","color","warn",1,"!border-red-700","!border",3,"click"],[1,"flex","flex-row","items-center","gap-x-2"],[1,"ri-delete-bin-6-line","text-lg"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],[1,"font-medium"],[1,"ri-arrow-right-line","text-sm","font-medium","text-orange-500"],[1,"ri-arrow-right-line","text-sm","font-medium","text-cyan-500"],["mat-header-cell","",1,"!text-center","w-20"],[1,"flex","flex-row","items-center","space-x-2"],["mat-icon-button","",3,"matTooltip"],[1,"ri-information-line"],["mat-header-row","",1,"!bg-gray-50"],["mat-row","",1,"hover:!bg-slate-50","cursor-pointer"],[1,"flex","flex-row","items-center","space-x-1","p-4"],[1,"text-sm","font-light","text-black"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),m(3,"Stocks / Transfers d'\xE9tat"),r()(),n(4,"div",2)(5,"div",3)(6,"button",4,5),f("click",function(){return o.toggleFilterMenu()}),n(8,"div",6),p(9,"i",7),n(10,"span"),m(11,"FILTRE"),r()()(),u(12,Fr,17,3,"ng-template",8),f("backdropClick",function(){return o.toggleFilterMenu()}),r(),n(13,"div",9),u(14,kr,5,1,"button",10),n(15,"button",11),f("click",function(){return o.newItem()}),n(16,"div",12),p(17,"i",13),n(18,"span",14),m(19,"Transfer"),r()()()()(),n(20,"div")(21,"div",15)(22,"table",16),y(23,17),u(24,wr,2,3,"th",18)(25,Er,2,2,"td",19),C(),y(26,20),u(27,Ir,2,0,"th",18)(28,Gr,2,1,"td",19),C(),y(29,21),u(30,Tr,2,0,"th",18)(31,Mr,3,4,"td",19),C(),y(32,22),u(33,Dr,2,0,"th",18)(34,Vr,3,4,"td",19),C(),y(35,23),u(36,Qr,2,0,"th",18)(37,Or,2,1,"td",19),C(),y(38,24),u(39,qr,2,0,"th",18)(40,Ar,5,2,"td",19),C(),y(41,25),u(42,Rr,2,0,"th",18)(43,Nr,5,2,"td",19),C(),y(44,26),u(45,Lr,2,0,"th",18)(46,Hr,3,4,"td",19),C(),y(47,27),u(48,zr,2,0,"th",18)(49,Br,2,1,"td",19),C(),y(50,28),u(51,jr,2,0,"th",29)(52,$r,4,1,"td",19),C(),u(53,Pr,1,0,"tr",30)(54,Ur,1,0,"tr",31),r(),u(55,Wr,3,0,"div",32),r(),p(56,"mat-paginator",33),r()()),i&2){let s=ge(7);c(12),d("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",o.isFilterMenuOpen)("cdkConnectedOverlayHasBackdrop",!0),c(2),d("ngIf",o.selection.selected.length>0),c(8),d("dataSource",o.dataSource),c(31),d("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),c(),d("matRowDefColumns",o.displayedColumns),c(),d("ngIf",o.dataSource.data.length==0),c(),d("showFirstLastButtons",o.showFirstLastButtons)("length",o.resultsLength)("pageSize",o.pageSize)}},dependencies:[ne,V,A,ae,le,oe,O,q,R,N,Se,Q,he,Ie,Ge,Me,Oe,De,Te,qe,Ve,Qe,Ae,Re,H,P,Ce,ye,j,z,B,st,et],styles:[`app-status-transfers-grid{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var Jr=["firstFocused"];function Kr(e,a){if(e&1&&(y(0),n(1,"option",55),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function Zr(e,a){if(e&1&&(y(0),n(1,"option",55),m(2),r(),C()),e&2){let l=a.$implicit;c(),d("value",l.id),c(),b(l.label)}}function Xr(e,a){if(e&1){let l=k();n(0,"div",34)(1,"div",35)(2,"span"),m(3,"Filtrer"),r(),n(4,"button",36),f("click",function(){x(l);let i=g();return S(i.toggleFilterMenu())}),p(5,"i",37),r()(),n(6,"form",38)(7,"my-form-field")(8,"my-label"),m(9,"Libell\xE9"),r(),p(10,"input",39,40),r(),n(12,"my-form-field")(13,"my-label"),m(14,"Famille"),r(),n(15,"select",41),u(16,Kr,3,2,"ng-container",42),r()(),n(17,"my-form-field")(18,"my-label"),m(19,"Cat\xE9gorie"),r(),n(20,"select",43),u(21,Zr,3,2,"ng-container",42),r()(),n(22,"my-form-field")(23,"my-label"),m(24,"\xC9tat"),r(),n(25,"select",44)(26,"option",45),m(27,"Frais"),r(),n(28,"option",46),m(29,"Congel\xE9e"),r()()(),n(30,"my-form-field")(31,"div"),m(32,"Date de derni\xE8re modification"),r(),n(33,"div",47)(34,"my-label"),m(35,"De :"),r(),p(36,"input",48),n(37,"my-label"),m(38,"\xC0 :"),r(),p(39,"input",49),r()(),n(40,"my-form-field",50)(41,"my-label"),m(42,"Date de derni\xE8re modification"),r(),n(43,"div",47)(44,"my-label"),m(45,"De :"),r(),p(46,"input",51),n(47,"my-label"),m(48,"\xC0 :"),r(),p(49,"input",52),r()()(),n(50,"div",53)(51,"button",54),f("click",function(){x(l);let i=g();return S(i.resetItemsFilterForm())}),m(52,"R\xE9initialiser"),r(),n(53,"button",11),f("click",function(){x(l);let i=g();return S(i.filterItems())}),m(54,"Appliquer"),r()()()}if(e&2){let l=g();c(6),d("formGroup",l.stockFilterFormGroup),c(10),d("ngForOf",l.families),c(5),d("ngForOf",l.categories)}}function Yr(e,a){if(e&1){let l=k();n(0,"button",56),f("click",function(){x(l);let i=g();return S(i.deleteSeleted())}),n(1,"div",57),p(2,"i",58),n(3,"span"),m(4),r()()()}if(e&2){let l=g();c(4),M("Supprimer (",l.selection.selected.length,")")}}function en(e,a){if(e&1){let l=k();n(0,"th",59)(1,"mat-checkbox",60),f("change",function(i){x(l);let o=g();return S(o.allSelectionChanged(i))}),r()()}if(e&2){let l=g();c(),d("checked",l.selection.hasValue()&&l.isAllSelected())("indeterminate",l.selection.hasValue()&&!l.isAllSelected())("aria-label",l.checkboxLabel())}}function tn(e,a){if(e&1){let l=k();n(0,"td",61)(1,"mat-checkbox",62),f("click",function(i){return i.stopPropagation()})("change",function(i){let s=x(l).$implicit,_=g();return S(_.selectionChanged(i,s))}),r()()}if(e&2){let l=a.$implicit,t=g();c(),d("checked",t.selection.isSelected(l))("aria-label",t.checkboxLabel(l))}}function rn(e,a){e&1&&(n(0,"th",59),m(1,"Code "),r())}function nn(e,a){if(e&1&&(n(0,"td",61),m(1),r()),e&2){let l=a.$implicit;c(),b(l.code)}}function on(e,a){e&1&&(n(0,"th",59),m(1,"Libell\xE9 "),r())}function an(e,a){if(e&1&&(n(0,"td",61),m(1),re(2,"myLimitTextLength"),r()),e&2){let l=a.$implicit;c(),b(Le(2,1,l.label,30))}}function ln(e,a){e&1&&(n(0,"th",59),m(1,"Cat\xE9gorie "),r())}function sn(e,a){if(e&1&&(n(0,"td",61),m(1),r()),e&2){let l=a.$implicit;c(),b(l.categoryId.label)}}function mn(e,a){e&1&&(n(0,"th",59),m(1,"Famille "),r())}function cn(e,a){if(e&1&&(n(0,"td",61),m(1),r()),e&2){let l=a.$implicit;c(),b(l.familyId.label)}}function dn(e,a){e&1&&(n(0,"th",59),m(1,"Prix de vente "),r())}function un(e,a){if(e&1&&(n(0,"td",61),m(1),r()),e&2){let l=a.$implicit;c(),b(l.salePrice)}}function pn(e,a){e&1&&(n(0,"th",59),m(1,"Quantit\xE9 (KG)"),r())}function fn(e,a){if(e&1&&(n(0,"td",61),m(1),r()),e&2){let l=a.$implicit;c(),b(l.quantity)}}function gn(e,a){e&1&&(n(0,"th",59),m(1,"\xC9tat"),r())}function hn(e,a){e&1&&(n(0,"div",65),m(1,"Frais"),r())}function _n(e,a){e&1&&(n(0,"div",66),m(1,"Congel\xE9e"),r())}function yn(e,a){if(e&1&&(n(0,"td",61),u(1,hn,2,0,"div",63)(2,_n,2,0,"div",64),r()),e&2){let l=a.$implicit;c(),d("ngIf",l.status=="free"),c(),d("ngIf",l.status=="frozen")}}function Cn(e,a){e&1&&(n(0,"th",59),m(1,"Notes"),r())}function xn(e,a){if(e&1&&(n(0,"td",61),m(1),r()),e&2){let l=a.$implicit;c(),b(l.notes)}}function Sn(e,a){e&1&&(n(0,"th",67),m(1,"Action"),r())}function bn(e,a){if(e&1){let l=k();n(0,"td",61)(1,"div",68)(2,"button",69),p(3,"i",70),r(),n(4,"button",71),f("click",function(){let o=x(l).$implicit,s=g();return S(s.deleteItem(o))}),p(5,"i",72),r(),n(6,"button",71),f("click",function(){let o=x(l).$implicit,s=g();return S(s.newItem("edit",o.id))}),p(7,"i",73),r()()()}if(e&2){let l=a.$implicit,t=g();c(2),d("matTooltip",t.getTracabilityInfo(l))}}function vn(e,a){e&1&&p(0,"tr",74)}function Fn(e,a){if(e&1){let l=k();n(0,"tr",75),f("dblclick",function(){let o=x(l).$implicit,s=g();return S(s.newItem("edit",o.id))}),r()}}function kn(e,a){e&1&&(n(0,"div",76)(1,"p",77),m(2,"Aucune donn\xE9e \xE0 afficher"),r()())}var Gt=(()=>{let a=class a{isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.data.length;return t===i}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:`${this.isAllSelected()?"deselect":"select"} all`}constructor(t,i,o,s,_,v,w){this.stocksHttp=t,this.snackBar=i,this.fb=o,this.matDialog=s,this.traceability=_,this.categoriesHttp=v,this.familiesHttp=w,this.dataSource=new Ne([]),this.displayedColumns=["select","code","label","familyId.label","categoryId.label","status","salePrice","quantity","actions"],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.isFilterMenuOpen=!1,this.refreshGrid=new X,this.stockFilterChanged=new X,this.pageSize=Y.pagination.pageSize,this.stocks=[],this.selection=new _e(!0,[]),this.showFirstLastButtons=Y.pagination.showFirstLastButtons,this.families=[],this.categories=[],this.stockFilterFormGroup=this.fb.group({label:[""],categoryId:[void 0],familyId:[void 0],status:[void 0],fromCreatedAt:[void 0],toCreatedAt:[void 0],fromLastUpdateAt:[void 0],toLastUpdateAt:[void 0]})}ngOnInit(){Tt([this.categoriesHttp.getAll(),this.familiesHttp.getAll()]).subscribe({next:([t,i])=>{this.categories=t,this.families=i}})}ngAfterViewInit(){this.sort.sortChange.subscribe({next:()=>this.paginator.pageIndex=0}),de(this.sort.sortChange,this.paginator.page,this.refreshGrid,this.stockFilterChanged).pipe(pe({}),fe(()=>(this.isLoadingResults=!0,this.stocksHttp.paginate(this.getFilterQuery).pipe(ue(()=>ie(null))))),ce(t=>(this.isLoadingResults=!1,this.isRateLimitReached=t?.data===null,ke(t)?[]:(this.resultsLength=t?.count,t?.items)))).subscribe({next:t=>this.dataSource.data=t})}newItem(t="creation",i=0){this.matDialog.open(nt,{data:{id:i,mode:t},minWidth:"512px",disableClose:!0,autoFocus:!1}).afterClosed().subscribe({next:o=>{this.refreshGrid.emit(),this.selection.clear()}})}deleteItem(t){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany([t])}deleteSeleted(){confirm("Etes-vous s\xFBr de ce que vous faites ?")&&this.deleteMany(this.selection.selected)}filterItems(){this.stockFilterChanged.emit()}resetItemsFilterForm(){this.stockFilterFormGroup.reset({label:"",categoryId:void 0,familyId:void 0,status:void 0,fromCreatedAt:void 0,toCreatedAt:void 0,fromLastUpdateAt:void 0,toLastUpdateAt:void 0}),this.stockFilterChanged.emit()}toggleFilterMenu(){this.isFilterMenuOpen=!this.isFilterMenuOpen,this.isFilterMenuOpen&&setTimeout(()=>{this.firstFocused?.nativeElement.focus()},200)}allSelectionChanged(t){t&&this.toggleAllRows()}selectionChanged(t,i){t&&this.selection.toggle(i)}deleteMany(t){let i=new URLSearchParams;t.forEach(s=>{i.append("id",s.id.toString())});let o=`?${i.toString()}`;this.stocksHttp.deleteMany(o).subscribe({next:s=>{s.success&&(this.snackBar.open("Op\xE9ration r\xE9ussie","\u2714",{duration:7e3}),this.refreshGrid.emit(),this.selection.clear())},error:s=>this.snackBar.open(s.message)})}get getFilterQuery(){let t=new URLSearchParams,i={pageIndex:this.paginator.pageIndex,pageSize:this.pageSize,label:this.stockFilterFormGroup.get("label")?.value,categoryId:this.stockFilterFormGroup.get("categoryId")?.value,familyId:this.stockFilterFormGroup.get("familyId")?.value,status:this.stockFilterFormGroup.get("status")?.value,fromCreatedAt:this.stockFilterFormGroup.get("fromCreatedAt")?.value,toCreatedAt:this.stockFilterFormGroup.get("toCreatedAt")?.value,fromLastUpdateAt:this.stockFilterFormGroup.get("fromLastUpdateAt")?.value,toLastUpdateAt:this.stockFilterFormGroup.get("toLastUpdateAt")?.value};return F(i.pageIndex)&&t.append("pageIndex",i.pageIndex.toString()),F(i.pageSize)&&t.append("pageSize",i.pageSize.toString()),t.append("order","DESC"),F(i.label)&&t.append("label",i.label),F(i.categoryId)&&t.append("categoryId",i.categoryId),F(i.familyId)&&t.append("familyId",i.familyId),F(i.status)&&t.append("status",i.status),F(i.fromCreatedAt)&&t.append("fromCreatedAt",i.fromCreatedAt),F(i.toCreatedAt)&&t.append("toCreatedAt",i.toCreatedAt),F(i.fromLastUpdateAt)&&t.append("fromLastUpdateAt",i.fromLastUpdateAt),F(i.toLastUpdateAt)&&t.append("toLastUpdateAt",i.toLastUpdateAt),`?${t.toString()}`}getTracabilityInfo(t){return this.traceability.info(t)}};a.\u0275fac=function(i){return new(i||a)(h(se),h($),h(L),h(te),h(Fe),h(Ze),h(Xe))},a.\u0275cmp=D({type:a,selectors:[["app-stocks-grid"]],viewQuery:function(i,o){if(i&1&&(E(H,5),E(P,5),E(Jr,5)),i&2){let s;I(s=G())&&(o.paginator=s.first),I(s=G())&&(o.sort=s.first),I(s=G())&&(o.firstFocused=s.first)}},decls:57,vars:12,consts:[[1,"flex","flex-1","flex-col","p-3","bg-secondary-50","gap-y-2"],[1,"flex","flex-col"],[1,"flex","flex-row","justify-between","items-center"],[1,"relative"],["mat-button","","cdkOverlayOrigin","",3,"click"],["trigger","cdkOverlayOrigin"],[1,"space-x-2"],[1,"ri-equalizer-line","text-lg"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","backdropClick"],[1,"flex","flex-row","items-center","gap-x-3"],["mat-stroked-button","","color","warn","class","!border-red-700 !border",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],[1,"!flex","!flex-row","!items-center","!space-x-2"],[1,"ri-add-line","text-lg"],[1,"text-white"],[1,"relative","flex-1","overflow-auto","!h-[calc(100vh-185px)]","bg-white","rounded","shadow"],["mat-table","","matSort","","matSortActive","createdAt","matSortDisableClear","","matSortDirection","desc",1,"w-full",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","label"],["matColumnDef","categoryId.label"],["matColumnDef","familyId.label"],["matColumnDef","salePrice"],["matColumnDef","quantity"],["matColumnDef","status"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-cell","","class","!text-center w-20 ",4,"matHeaderCellDef"],["mat-header-row","","class","!bg-gray-50",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","hover:!bg-slate-50 cursor-pointer",3,"dblclick",4,"matRowDef","matRowDefColumns"],["class","flex flex-row items-center space-x-1 p-4",4,"ngIf"],["aria-label","S\xE9lectionnez la page des r\xE9sultats de recherche d'apc kouba",1,"!flex","!justify-start","!bg-transparent",3,"showFirstLastButtons","length","pageSize"],[1,"flex","flex-col","min-w-[400px]","max-h-[80vh]","overflow-auto","bg-white","shadow-lg","border","border-gray-200","rounded-sm"],[1,"flex","flex-row","items-center","justify-between","px-4","py-2","bg-slate-100"],[3,"click"],[1,"ri-close-line"],[1,"flex","flex-col","!text-sm","gap-y-2","p-5",3,"formGroup"],["formControlName","label","type","text","myInput",""],["firstFocused",""],["formControlName","familyId","myInput",""],[4,"ngFor","ngForOf"],["formControlName","categoryId","myInput",""],["formControlName","status","myInput",""],["value","free"],["value","frozen"],[1,"flex","flex-row","items-center","gap-x-2","mt-2"],["formControlName","fromCreatedAt","type","date","myInput",""],["formControlName","toCreatedAt","type","date","myInput",""],[1,"mt-3"],["formControlName","fromLastUpdateAt","type","date","myInput",""],["formControlName","toLastUpdateAt","type","date","myInput",""],[1,"flex","flex-row","justify-between","p-6"],["mat-stroked-button","","color","secondary",3,"click"],[3,"value"],["mat-stroked-button","","color","warn",1,"!border-red-700","!border",3,"click"],[1,"flex","flex-row","items-center","gap-x-2"],[1,"ri-delete-bin-6-line","text-lg"],["mat-header-cell",""],["color","primary",3,"checked","indeterminate","aria-label","change"],["mat-cell",""],["color","primary",3,"checked","aria-label","click","change"],["class","px-2 py-1 rounded !text-xs font-medium w-fit bg-orange-100 text-orange-500",4,"ngIf"],["class","px-2 py-1 rounded !text-xs font-medium w-fit bg-blue-100 text-blue-500",4,"ngIf"],[1,"px-2","py-1","rounded","!text-xs","font-medium","w-fit","bg-orange-100","text-orange-500"],[1,"px-2","py-1","rounded","!text-xs","font-medium","w-fit","bg-blue-100","text-blue-500"],["mat-header-cell","",1,"!text-center","w-20"],[1,"flex","flex-row","items-center","space-x-2"],["mat-icon-button","",3,"matTooltip"],[1,"ri-information-line"],["mat-icon-button","",3,"click"],[1,"ri-delete-bin-6-line","text-red-600"],[1,"ri-pencil-line"],["mat-header-row","",1,"!bg-gray-50"],["mat-row","",1,"hover:!bg-slate-50","cursor-pointer",3,"dblclick"],[1,"flex","flex-row","items-center","space-x-1","p-4"],[1,"text-sm","font-light","text-black"]],template:function(i,o){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),m(3,"Stocks"),r()(),n(4,"div",2)(5,"div",3)(6,"button",4,5),f("click",function(){return o.toggleFilterMenu()}),n(8,"div",6),p(9,"i",7),n(10,"span"),m(11,"FILTRE"),r()()(),u(12,Xr,55,3,"ng-template",8),f("backdropClick",function(){return o.toggleFilterMenu()}),r(),n(13,"div",9),u(14,Yr,5,1,"button",10),n(15,"button",11),f("click",function(){return o.newItem()}),n(16,"div",12),p(17,"i",13),n(18,"span",14),m(19,"Stock"),r()()()()(),n(20,"div")(21,"div",15)(22,"table",16),y(23,17),u(24,en,2,3,"th",18)(25,tn,2,2,"td",19),C(),y(26,20),u(27,rn,2,0,"th",18)(28,nn,2,1,"td",19),C(),y(29,21),u(30,on,2,0,"th",18)(31,an,3,4,"td",19),C(),y(32,22),u(33,ln,2,0,"th",18)(34,sn,2,1,"td",19),C(),y(35,23),u(36,mn,2,0,"th",18)(37,cn,2,1,"td",19),C(),y(38,24),u(39,dn,2,0,"th",18)(40,un,2,1,"td",19),C(),y(41,25),u(42,pn,2,0,"th",18)(43,fn,2,1,"td",19),C(),y(44,26),u(45,gn,2,0,"th",18)(46,yn,3,2,"td",19),C(),y(47,27),u(48,Cn,2,0,"th",18)(49,xn,2,1,"td",19),C(),y(50,28),u(51,Sn,2,0,"th",29)(52,bn,8,1,"td",19),C(),u(53,vn,1,0,"tr",30)(54,Fn,1,0,"tr",31),r(),u(55,kn,3,0,"div",32),r(),p(56,"mat-paginator",33),r()()),i&2){let s=ge(7);c(12),d("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",o.isFilterMenuOpen)("cdkConnectedOverlayHasBackdrop",!0),c(2),d("ngIf",o.selection.selected.length>0),c(8),d("dataSource",o.dataSource),c(31),d("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),c(),d("matRowDefColumns",o.displayedColumns),c(),d("ngIf",o.dataSource.data.length==0),c(),d("showFirstLastButtons",o.showFirstLastButtons)("length",o.resultsLength)("pageSize",o.pageSize)}},dependencies:[ne,V,A,ae,le,K,oe,O,q,R,N,Se,Q,he,Ie,Ge,Me,Oe,De,Te,qe,Ve,Qe,Ae,Re,H,P,Ce,ye,j,z,B,et],styles:[`app-stocks-grid{display:flex;flex:1}
`],encapsulation:2});let e=a;return e})();var wn=[{path:"",redirectTo:"stocks",pathMatch:"full"},{path:"stocks",component:Gt},{path:"families",component:vt},{path:"categories",component:Ft},{path:"quantity-corrections",component:wt},{path:"status-transfers",component:It}],qt=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=lt({type:a}),a.\u0275inj=at({imports:[bt.forChild(wn),bt]});let e=a;return e})();var Ga=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=lt({type:a}),a.\u0275inj=at({imports:[Vt,qt]});let e=a;return e})();export{Ga as StocksModule};
